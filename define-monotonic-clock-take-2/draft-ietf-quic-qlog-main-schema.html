<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>qlog: Structured Logging for Network Protocols</title>
<meta content="Robin Marx" name="author">
<meta content="Luca Niccolini" name="author">
<meta content="Marten Seemann" name="author">
<meta content="Lucas Pardue" name="author">
<meta content="
       qlog provides extensible structured logging for network protocols, allowing for
easy sharing of data that benefits common debug and analysis methods and
tooling. This document describes key concepts of qlog: formats, files, traces,
events, and extension points. This definition includes the high-level log file
schemas, and generic event schemas. Requirements and guidelines for creating
protocol-specific event schemas are also presented. All schemas are defined
independent of serialization format, allowing logs to be represented in various
ways such as JSON, CSV, or protobuf. 
    " name="description">
<meta content="xml2rfc 3.23.2" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-quic-qlog-main-schema-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.23.2
    Python 3.12.7
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.3.6
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.32.3
    setuptools 70.3.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-quic-qlog-main-schema.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">qlog</td>
<td class="right">October 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Marx, et al.</td>
<td class="center">Expires 24 April 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-quic-qlog-main-schema-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-10-21" class="published">21 October 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-04-24">24 April 2025</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Marx, <span class="editor">Ed.</span>
</div>
<div class="org">Akamai</div>
</div>
<div class="author">
      <div class="author-name">L. Niccolini, <span class="editor">Ed.</span>
</div>
<div class="org">Meta</div>
</div>
<div class="author">
      <div class="author-name">M. Seemann, <span class="editor">Ed.</span>
</div>
</div>
<div class="author">
      <div class="author-name">L. Pardue, <span class="editor">Ed.</span>
</div>
<div class="org">Cloudflare</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">qlog: Structured Logging for Network Protocols</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">qlog provides extensible structured logging for network protocols, allowing for
easy sharing of data that benefits common debug and analysis methods and
tooling. This document describes key concepts of qlog: formats, files, traces,
events, and extension points. This definition includes the high-level log file
schemas, and generic event schemas. Requirements and guidelines for creating
protocol-specific event schemas are also presented. All schemas are defined
independent of serialization format, allowing logs to be represented in various
ways such as JSON, CSV, or protobuf.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-note-to-readers">
<a href="#name-note-to-readers" class="section-name selfRef">Note to Readers</a>
      </h2>
<ul class="normal note ulEmpty">
<li class="normal note ulEmpty" id="section-note.1-1.1">
          <p id="section-note.1-1.1.1">Note to RFC editor: Please remove this section before publication.<a href="#section-note.1-1.1.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-note.1-2">Feedback and discussion are welcome at
<a href="https://github.com/quicwg/qlog">https://github.com/quicwg/qlog</a>. Readers are
advised to refer to the "editor's draft" at that URL for an up-to-date version
of this document.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Concrete examples of integrations of this schema in
various programming languages can be found at
<a href="https://github.com/quiclog/qlog/">https://github.com/quiclog/qlog/</a>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 24 April 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-conventions-and-terminology" class="internal xref">Conventions and Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-use-of-cddl" class="internal xref">Use of CDDL</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-design-overview" class="internal xref">Design Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-abstract-logfile-class" class="internal xref">Abstract LogFile Class</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-concrete-log-file-schema-ur" class="internal xref">Concrete Log File Schema URIs</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-qlogfile-schema" class="internal xref">QlogFile schema</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-traces" class="internal xref">Traces</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-trace" class="internal xref">Trace</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-traceerror" class="internal xref">TraceError</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-qlogfileseq-schema" class="internal xref">QlogFileSeq schema</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-traceseq" class="internal xref">TraceSeq</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-vantagepoint" class="internal xref">VantagePoint</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-abstract-event-class" class="internal xref">Abstract Event Class</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-timestamps" class="internal xref">Timestamps</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-path" class="internal xref">Path</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-protocoltypelist-and-protoc" class="internal xref">ProtocolTypeList and ProtocolType</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-grouping" class="internal xref">Grouping</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-systeminformation" class="internal xref">SystemInformation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6">
                <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="auto internal xref">7.6</a>.  <a href="#name-commonfields" class="internal xref">CommonFields</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-concrete-event-types-and-ev" class="internal xref">Concrete Event Types and Event Schema</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-event-schema-and-event-cate" class="internal xref">Event Schema and Event Category URIs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-extending-the-data-field" class="internal xref">Extending the Data Field</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="auto internal xref">8.2.1</a>.  <a href="#name-triggers" class="internal xref">Triggers</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-event-importance-levels" class="internal xref">Event Importance Levels</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-tooling-expectations" class="internal xref">Tooling Expectations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5">
                <p id="section-toc.1-1.8.2.5.1"><a href="#section-8.5" class="auto internal xref">8.5</a>.  <a href="#name-further-design-guidance" class="internal xref">Further Design Guidance</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-the-generic-event-schema" class="internal xref">The Generic Event Schema</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-log-level-events" class="internal xref">Log Level Events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.1">
                    <p id="section-toc.1-1.9.2.1.2.1.1"><a href="#section-9.1.1" class="auto internal xref">9.1.1</a>.  <a href="#name-error" class="internal xref">error</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.2">
                    <p id="section-toc.1-1.9.2.1.2.2.1"><a href="#section-9.1.2" class="auto internal xref">9.1.2</a>.  <a href="#name-warning" class="internal xref">warning</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.3">
                    <p id="section-toc.1-1.9.2.1.2.3.1"><a href="#section-9.1.3" class="auto internal xref">9.1.3</a>.  <a href="#name-info" class="internal xref">info</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.4">
                    <p id="section-toc.1-1.9.2.1.2.4.1"><a href="#section-9.1.4" class="auto internal xref">9.1.4</a>.  <a href="#name-debug" class="internal xref">debug</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.5">
                    <p id="section-toc.1-1.9.2.1.2.5.1"><a href="#section-9.1.5" class="auto internal xref">9.1.5</a>.  <a href="#name-verbose" class="internal xref">verbose</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-simulation-events" class="internal xref">Simulation Events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.1">
                    <p id="section-toc.1-1.9.2.2.2.1.1"><a href="#section-9.2.1" class="auto internal xref">9.2.1</a>.  <a href="#name-scenario" class="internal xref">scenario</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.2">
                    <p id="section-toc.1-1.9.2.2.2.2.1"><a href="#section-9.2.2" class="auto internal xref">9.2.2</a>.  <a href="#name-marker" class="internal xref">marker</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-raw-packet-and-frame-inform" class="internal xref">Raw packet and frame information</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-serializing-qlog" class="internal xref">Serializing qlog</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-qlog-to-json-mapping" class="internal xref">qlog to JSON mapping</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-qlog-to-json-text-sequences" class="internal xref">qlog to JSON Text Sequences mapping</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2.2.1">
                    <p id="section-toc.1-1.11.2.2.2.1.1"><a href="#section-11.2.1" class="auto internal xref">11.2.1</a>.  <a href="#name-supporting-json-text-sequen" class="internal xref">Supporting JSON Text Sequences in tooling</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="auto internal xref">11.3</a>.  <a href="#name-json-interoperability" class="internal xref">JSON Interoperability</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.4">
                <p id="section-toc.1-1.11.2.4.1"><a href="#section-11.4" class="auto internal xref">11.4</a>.  <a href="#name-truncated-values" class="internal xref">Truncated values</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.5">
                <p id="section-toc.1-1.11.2.5.1"><a href="#section-11.5" class="auto internal xref">11.5</a>.  <a href="#name-optimization-of-serialized-" class="internal xref">Optimization of serialized data</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-methods-of-access-and-gener" class="internal xref">Methods of access and generation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-set-file-output-destination" class="internal xref">Set file output destination via an environment variable</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-tooling-requirements" class="internal xref">Tooling requirements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>. <a href="#name-security-and-privacy-consid" class="internal xref">Security and privacy considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-14.1" class="auto internal xref">14.1</a>.  <a href="#name-data-at-risk" class="internal xref">Data at risk</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-14.2" class="auto internal xref">14.2</a>.  <a href="#name-operational-implications-an" class="internal xref">Operational implications and recommendations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.3">
                <p id="section-toc.1-1.14.2.3.1"><a href="#section-14.3" class="auto internal xref">14.3</a>.  <a href="#name-data-minimization-or-anonym" class="internal xref">Data minimization or anonymization</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="auto internal xref">15</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="auto internal xref">16</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#section-16.1" class="auto internal xref">16.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#section-16.2" class="auto internal xref">16.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-change-log" class="internal xref">Change Log</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1">
                <p id="section-toc.1-1.18.2.1.1"><a href="#appendix-B.1" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-" class="internal xref">Since draft-ietf-quic-qlog-main-schema-07:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2">
                <p id="section-toc.1-1.18.2.2.1"><a href="#appendix-B.2" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-m" class="internal xref">Since draft-ietf-quic-qlog-main-schema-06:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.3">
                <p id="section-toc.1-1.18.2.3.1"><a href="#appendix-B.3" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-ma" class="internal xref">Since draft-ietf-quic-qlog-main-schema-05:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.4">
                <p id="section-toc.1-1.18.2.4.1"><a href="#appendix-B.4" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-mai" class="internal xref">Since draft-ietf-quic-qlog-main-schema-04:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.5">
                <p id="section-toc.1-1.18.2.5.1"><a href="#appendix-B.5" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-main" class="internal xref">Since draft-ietf-quic-qlog-main-schema-03:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.6">
                <p id="section-toc.1-1.18.2.6.1"><a href="#appendix-B.6" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-main-" class="internal xref">Since draft-ietf-quic-qlog-main-schema-02:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.7">
                <p id="section-toc.1-1.18.2.7.1"><a href="#appendix-B.7" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-main-s" class="internal xref">Since draft-ietf-quic-qlog-main-schema-01:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.8">
                <p id="section-toc.1-1.18.2.8.1"><a href="#appendix-B.8" class="auto internal xref"></a><a href="#name-since-draft-ietf-quic-qlog-main-sc" class="internal xref">Since draft-ietf-quic-qlog-main-schema-00:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.9">
                <p id="section-toc.1-1.18.2.9.1"><a href="#appendix-B.9" class="auto internal xref"></a><a href="#name-since-draft-marx-qlog-main-" class="internal xref">Since draft-marx-qlog-main-schema-draft-02:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.10">
                <p id="section-toc.1-1.18.2.10.1"><a href="#appendix-B.10" class="auto internal xref"></a><a href="#name-since-draft-marx-qlog-main-s" class="internal xref">Since draft-marx-qlog-main-schema-01:</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.11">
                <p id="section-toc.1-1.18.2.11.1"><a href="#appendix-B.11" class="auto internal xref"></a><a href="#name-since-draft-marx-qlog-main-sc" class="internal xref">Since draft-marx-qlog-main-schema-00:</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Endpoint logging is a useful strategy for capturing and understanding how
applications using network protocols are behaving, particularly where protocols
have an encrypted wire image that restricts observers' ability to see what is
happening.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Many applications implement logging using a custom, non-standard logging format.
This has an effect on the tools and methods that are used to
analyze the logs, for example to perform root cause analysis of an
interoperability failure between distinct implementations. A lack of a common
format impedes the development of common tooling that can be used by all parties
that have access to logs.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">qlog is an extensible structured logging for network protocols that allows for
easy sharing of data that benefits common debug and analysis methods and
tooling. This document describes key concepts of qlog: formats, files, traces,
events, and extension points. This definition includes the high-level log file
schemas, and generic event schemas. Requirements and guidelines for creating
protocol-specific event schemas are also presented. Accompanying documents
define event schema for QUIC (<span>[<a href="#QLOG-QUIC" class="cite xref">QLOG-QUIC</a>]</span>) and HTTP/3 (<span>[<a href="#QLOG-H3" class="cite xref">QLOG-H3</a>]</span>).<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">The goal of qlog is to provide amenities and default characteristics that each
logging file should contain (or should be able to contain), such that generic
and reusable toolsets can be created that can deal with logs from a variety of
different protocols and use cases.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">As such, qlog provides versioning, metadata inclusion, log aggregation, event
grouping and log file size reduction techniques.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">All qlog schemas can be serialized in many ways (e.g., JSON, CBOR, protobuf,
etc). This document describes only how to employ <span>[<a href="#JSON" class="cite xref">JSON</a>]</span>, its subset
<span>[<a href="#I-JSON" class="cite xref">I-JSON</a>]</span>, and its streamable derivative
<span>[<a href="#JSON-Text-Sequences" class="cite xref">JSON-Text-Sequences</a>]</span>.<a href="#section-1-6" class="pilcrow">¶</a></p>
<div id="conventions-and-terminology">
<section id="section-1.1">
        <h3 id="name-conventions-and-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-conventions-and-terminology" class="section-name selfRef">Conventions and Terminology</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Serialization examples in this document use JSON (<span>[<a href="#JSON" class="cite xref">JSON</a>]</span>) unless
otherwise indicated.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-of-cddl">
<section id="section-1.2">
        <h3 id="name-use-of-cddl">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-use-of-cddl" class="section-name selfRef">Use of CDDL</a>
        </h3>
<p id="section-1.2-1">To define events and data structures, all qlog documents use the Concise Data
Definition Language <span>[<a href="#CDDL" class="cite xref">CDDL</a>]</span>. This document uses the basic syntax, the
specific <code>text</code>, <code>uint</code>, <code>float32</code>, <code>float64</code>, <code>bool</code>, and <code>any</code> types, as well
as the <code>.default</code>, <code>.size</code>, and <code>.regexp</code> control operators, the <code>~</code> unwrapping
operator, and the <code>$</code> and <code>$$</code> extension points syntax from <span>[<a href="#CDDL" class="cite xref">CDDL</a>]</span>.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">Additionally, this document defines the following custom types for
clarity:<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<span id="name-additional-cddl-type-defini"></span><div id="cddl-custom-types-def">
<figure id="figure-1">
          <div class="lang-cddl sourcecode" id="section-1.2-3.1">
<pre>
; CDDL's uint is defined as being 64-bit in size
; but for many protocol fields it is better to be restrictive
; and explicit
uint8 = uint .size 1
uint16 = uint .size 2
uint32 = uint .size 4
uint64 = uint .size 8

; an even-length lowercase string of hexadecimally encoded bytes
; examples: 82dc, 027339, 4cdbfd9bf0
; this is needed because the default CDDL binary string (bytes/bstr)
; is only CBOR and not JSON compatible
hexstring = text .regexp "([0-9a-f]{2})*"
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-additional-cddl-type-defini" class="selfRef">Additional CDDL type definitions</a>
          </figcaption></figure>
</div>
<p id="section-1.2-4">All timestamps and time-related values (e.g., offsets) in qlog are
logged as <code>float64</code> in the millisecond resolution.<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<p id="section-1.2-5">Other qlog documents can define their own CDDL-compatible (struct) types
(e.g., separately for each Packet type that a protocol supports).<a href="#section-1.2-5" class="pilcrow">¶</a></p>
<p id="section-1.2-6">The ordering of member fields in qlog CDDL type definitions is not significant.
The ordering of member fields in the serialization formats defined in this
document, JSON (<a href="#format-json" class="auto internal xref">Section 11.1</a>) and JSON Text Sequences (<a href="#format-json-seq" class="auto internal xref">Section 11.2</a>),
is not significant and qlog tools <span class="bcp14">MUST NOT</span> assume so. Other qlog serialization
formats <span class="bcp14">MAY</span> define field order significance, if they do they <span class="bcp14">MUST</span> define
requirements for qlog tools supporting those formats.<a href="#section-1.2-6" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-1.2-7.1">
            <p id="section-1.2-7.1.1">Note to RFC editor: Please remove the following text in this section before
publication.<a href="#section-1.2-7.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-1.2-8">The main general CDDL syntax conventions in this document a reader
should be aware of for easy reading comprehension are:<a href="#section-1.2-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-9.1">
            <p id="section-1.2-9.1.1"><code>? obj</code> : this object is optional<a href="#section-1.2-9.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.2">
            <p id="section-1.2-9.2.1"><code>TypeName1 / TypeName2</code> : a union of these two types (object can be either type 1 OR
type 2)<a href="#section-1.2-9.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.3">
            <p id="section-1.2-9.3.1"><code>obj: TypeName</code> : this object has this concrete type<a href="#section-1.2-9.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.4">
            <p id="section-1.2-9.4.1"><code>obj: [* TypeName]</code> : this object is an array of this type with
minimum size of 0 elements<a href="#section-1.2-9.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.5">
            <p id="section-1.2-9.5.1"><code>obj: [+ TypeName]</code> : this object is an array of this type with
minimum size of 1 element<a href="#section-1.2-9.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.6">
            <p id="section-1.2-9.6.1"><code>TypeName = ...</code> : defines a new type<a href="#section-1.2-9.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.7">
            <p id="section-1.2-9.7.1"><code>EnumName = "entry1" / "entry2" / entry3 / ...</code>: defines an enum<a href="#section-1.2-9.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.8">
            <p id="section-1.2-9.8.1"><code>StructName = { ... }</code> : defines a new struct type<a href="#section-1.2-9.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.9">
            <p id="section-1.2-9.9.1"><code>;</code> : single-line comment<a href="#section-1.2-9.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-1.2-9.10">
            <p id="section-1.2-9.10.1"><code>* text =&gt; any</code> : special syntax to indicate 0 or more fields that
have a string key that maps to any value. Used to indicate a generic
JSON object.<a href="#section-1.2-9.10.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-1.2-10">All timestamps and time-related values (e.g., offsets) in qlog are
logged as <code>float64</code> in the millisecond resolution.<a href="#section-1.2-10" class="pilcrow">¶</a></p>
<p id="section-1.2-11">Other qlog documents can define their own CDDL-compatible (struct) types
(e.g., separately for each Packet type that a protocol supports).<a href="#section-1.2-11" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="design-overview">
<section id="section-2">
      <h2 id="name-design-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-design-overview" class="section-name selfRef">Design Overview</a>
      </h2>
<p id="section-2-1">The main tenets for the qlog design are:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">
          <p id="section-2-2.1.1">Streamable, event-based logging<a href="#section-2-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.2">
          <p id="section-2-2.2.1">A flexible format that can reduce log producer overhead, at the cost of
increased complexity for consumers (e.g. tools)<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.3">
          <p id="section-2-2.3.1">Extensible and pragmatic<a href="#section-2-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.4">
          <p id="section-2-2.4.1">Aggregation and transformation friendly (e.g., the top-level element
for the non-streaming format is a container for individual traces,
group_ids can be used to tag events to a particular context)<a href="#section-2-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.5">
          <p id="section-2-2.5.1">Metadata is stored together with event data<a href="#section-2-2.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-3">This is achieved by a logical logging hierarchy of:<a href="#section-2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-4.1">
          <p id="section-2-4.1.1">Log file<a href="#section-2-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-4.1.2.1">
              <p id="section-2-4.1.2.1.1">Trace(s)<a href="#section-2-4.1.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-4.1.2.1.2.1">
                  <p id="section-2-4.1.2.1.2.1.1">Event(s)<a href="#section-2-4.1.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
          </ul>
</li>
      </ul>
<p id="section-2-5">An abstract LogFile class is declared (<a href="#abstract-logfile" class="auto internal xref">Section 3</a>), from which all
concrete log file formats derive using log file schemas. This document defines
the QLogFile (<a href="#qlog-file-schema" class="auto internal xref">Section 4</a>) and QLogFileSeq (<a href="#qlog-file-seq-schema" class="auto internal xref">Section 5</a>)
log file schemas.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">A trace is conceptually fluid but the conventional use case is to group events
related to a single data flow, such as a single logical QUIC connection, at a
single vantage point (<a href="#vantage-point" class="auto internal xref">Section 6</a>). Concrete trace definitions relate to
the log file schemas they are contained in; see (<a href="#traces" class="auto internal xref">Section 4.1</a>, <a href="#trace" class="auto internal xref">Section 4.2</a>, and
<a href="#traceseq" class="auto internal xref">Section 5.1</a>).<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">Events are logged at a time instant and convey specific details of the logging
use case. For example, a network packet being sent or received. This document
declares an abstract Event class (<a href="#abstract-event" class="auto internal xref">Section 7</a>) containing common fields,
which all concrete events derive from. Concrete events are defined by event
schemas that declare a namespace, consisting of one or more categories,
containing one or more related event types. For example, this document defines
the generic event schema structured as:<a href="#section-2-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-8.1">
          <p id="section-2-8.1.1"><code>gen</code> namespace<a href="#section-2-8.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-8.1.2.1">
              <p id="section-2-8.1.2.1.1"><code>loglevel</code> category<a href="#section-2-8.1.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-8.1.2.1.2.1">
                  <p id="section-2-8.1.2.1.2.1.1"><code>error</code> event type<a href="#section-2-8.1.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-2-8.1.2.1.2.2">
                  <p id="section-2-8.1.2.1.2.2.1"><code>warning</code> event type<a href="#section-2-8.1.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-2-8.1.2.1.2.3">
                  <p id="section-2-8.1.2.1.2.3.1"><code>info</code> event type<a href="#section-2-8.1.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-2-8.1.2.1.2.4">
                  <p id="section-2-8.1.2.1.2.4.1"><code>debug</code> event type<a href="#section-2-8.1.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-2-8.1.2.1.2.5">
                  <p id="section-2-8.1.2.1.2.5.1"><code>verbose</code> event type<a href="#section-2-8.1.2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li class="normal" id="section-2-8.1.2.2">
              <p id="section-2-8.1.2.2.1"><code>sim</code> category<a href="#section-2-8.1.2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-8.1.2.2.2.1">
                  <p id="section-2-8.1.2.2.2.1.1"><code>scenario</code> event type<a href="#section-2-8.1.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-2-8.1.2.2.2.2">
                  <p id="section-2-8.1.2.2.2.2.1"><code>marker</code> event type<a href="#section-2-8.1.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
          </ul>
</li>
      </ul>
</section>
</div>
<div id="abstract-logfile">
<section id="section-3">
      <h2 id="name-abstract-logfile-class">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-abstract-logfile-class" class="section-name selfRef">Abstract LogFile Class</a>
      </h2>
<p id="section-3-1">A Log file is intended to contain a collection of events that are in some way
related. An abstract LogFile class containing fields common to all log files is
defined in <a href="#abstract-logfile-def" class="auto internal xref">Figure 2</a>. Each concrete log file schema derives from
this using the CDDL unwrap operator (~) and can extend it by defining semantics
and any custom fields.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-logfile-definition"></span><div id="abstract-logfile-def">
<figure id="figure-2">
        <div class="lang-cddl sourcecode" id="section-3-2.1">
<pre>
LogFile = {
    file_schema: text
    serialization_format: text
    ? title: text
    ? description: text
    event_schemas: [+text]
}
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-logfile-definition" class="selfRef">LogFile definition</a>
        </figcaption></figure>
</div>
<p id="section-3-3">The required "file_schema" field identifies the concrete log file schema. It
<span class="bcp14">MUST</span> have a value that is an absolute URI; see <a href="#schema-uri" class="auto internal xref">Section 3.1</a> for rules and
guidance.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The required "serialization_format" field indicates the serialization
format using a media type <span>[<a href="#RFC2046" class="cite xref">RFC2046</a>]</span>. It is case-insensitive.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">In order to make it easier to parse and identify qlog files and their
serialization format, the "file_schema" and "serialization_format" fields and
their values <span class="bcp14">SHOULD</span> be in the first 256 characters/bytes of the resulting log
file.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">The optional "title" and "description" fields provide additional free-text
information about the file.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">The required "event_schemas" field contains event schema URIs that identify
concrete event categories and their associated types recorded in a log.
Requirements and guidelines are defined in <a href="#event-types-and-schema" class="auto internal xref">Section 8</a>.<a href="#section-3-7" class="pilcrow">¶</a></p>
<div id="schema-uri">
<section id="section-3.1">
        <h3 id="name-concrete-log-file-schema-ur">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-concrete-log-file-schema-ur" class="section-name selfRef">Concrete Log File Schema URIs</a>
        </h3>
<p id="section-3.1-1">Concrete log file schemas <span class="bcp14">MUST</span> identify themselves using a URI <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Log file schemas defined by RFCs <span class="bcp14">MUST</span> register a URI in the "qlog log file
schema URIs" registry and <span class="bcp14">SHOULD</span> use a URN of the form
<code>urn:ietf:params:qlog:file:&lt;schema-identifier&gt;</code>, where <code>&lt;schema-identifier&gt;</code> is
a globally-unique text name using only characters in the URI unreserved range;
see <span><a href="https://rfc-editor.org/rfc/rfc3986#section-2.3" class="relref">Section 2.3</a> of [<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>. This document registers
<code>urn:ietf:params:qlog:file:contained</code> (<a href="#qlog-file-schema" class="auto internal xref">Section 4</a>) and
<code>urn:ietf:params:qlog:file:sequential</code> (<a href="#qlog-file-seq-schema" class="auto internal xref">Section 5</a>).<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">Private or non-standard log file schemas <span class="bcp14">MAY</span> register a URI in the "qlog log
file schema URIs" registry but <span class="bcp14">MUST NOT</span> use a URN of the form
<code>urn:ietf:params:qlog:file:&lt;schema-identifier&gt;</code>. URIs that contain a domain name
<span class="bcp14">SHOULD</span> also contain a month-date in the form mmyyyy. For example,
"https://example.org/072024/globallyuniquelogfileschema". The definition of the
log file schema and assignment of the URI <span class="bcp14">MUST</span> have been authorized by the owner
of the domain name on or very close to that date. This avoids problems when
domain names change ownership. The URI does not need to be dereferencable,
allowing for confidential use or to cover the case where the log file schema
continues to be used after the organization that defined them ceases to exist.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">The "qlog log file schema URIs" registry operates under the Expert Review
policy, per <span><a href="https://rfc-editor.org/rfc/rfc8126#section-4.5" class="relref">Section 4.5</a> of [<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>.  When reviewing requests, the expert
<span class="bcp14">MUST</span> check that the URI is appropriate to the concrete log file schema and
satisfies the requirements in this section. A request to register a private or
non-standard log file schema URI using a URN of the form
<code>urn:ietf:params:qlog:file:&lt;schema-identifier&gt;</code> <span class="bcp14">MUST</span> be rejected.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">Registration requests should use the following template:<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1-6">
          <dt id="section-3.1-6.1">Log File Schema URI:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-6.2">
            <p id="section-3.1-6.2.1">[the log file schema identifier]<a href="#section-3.1-6.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-6.3">Description:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-6.4">
            <p id="section-3.1-6.4.1">[a description of the log file schema]<a href="#section-3.1-6.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-6.5">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-6.6">
            <p id="section-3.1-6.6.1">[to a specification defining the log file schema]<a href="#section-3.1-6.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="qlog-file-schema">
<section id="section-4">
      <h2 id="name-qlogfile-schema">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-qlogfile-schema" class="section-name selfRef">QlogFile schema</a>
      </h2>
<p id="section-4-1">A qlog file using the QlogFile schema can contain several individual traces and
logs from multiple vantage points that are in some way related. The top-level
element in this schema defines only a small set of "header" fields and an array
of component traces. This is defined in <a href="#qlog-file-def" class="auto internal xref">Figure 3</a> as:<a href="#section-4-1" class="pilcrow">¶</a></p>
<span id="name-qlogfile-definition"></span><div id="qlog-file-def">
<figure id="figure-3">
        <div class="lang-cddl sourcecode" id="section-4-2.1">
<pre>
QlogFile = {
    ~LogFile
    ? traces: [+ Trace /
                TraceError]
}
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-qlogfile-definition" class="selfRef">QlogFile definition</a>
        </figcaption></figure>
</div>
<p id="section-4-3">The QlogFile schema URI is <code>urn:ietf:params:qlog:file:contained</code>.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">QlogFile extends LogFile using the CDDL unwrap operator (~), which copies the
fields presented in <a href="#abstract-logfile" class="auto internal xref">Section 3</a>. Additionally, the optional "traces"
field contains an array of qlog traces (<a href="#trace" class="auto internal xref">Section 4.2</a>), each of which contain
metadata and an array of qlog events (<a href="#abstract-event" class="auto internal xref">Section 7</a>).<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">The default serialization format for QlogFile is JSON; see <a href="#format-json" class="auto internal xref">Section 11.1</a> for
guidance on populating the "serialization_format" field and other
considerations. Where a qlog file is serialized to a JSON format, one of the
downsides is that it is inherently a non-streamable format. Put differently, it
is not possible to simply append new qlog events to a log file without "closing"
this file at the end by appending "]}]}". Without these closing tags, most JSON
parsers will be unable to parse the file entirely. The alternative QlogFileSeq
(<a href="#qlog-file-seq-schema" class="auto internal xref">Section 5</a>) is better suited to streaming use cases.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">JSON serialization example:<a href="#section-4-6" class="pilcrow">¶</a></p>
<span id="name-qlogfile-example"></span><div id="qlog-file-ex">
<figure id="figure-4">
        <div class="alignLeft art-text artwork" id="section-4-7.1">
<pre>
{
    "file_schema": "urn:ietf:params:qlog:file:contained",
    "serialization_format": "application/qlog+json",
    "title": "Name of this particular qlog file (short)",
    "description": "Description for this group of traces (long)",
    "traces": [...]
}
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-qlogfile-example" class="selfRef">QlogFile example</a>
        </figcaption></figure>
</div>
<div id="traces">
<section id="section-4.1">
        <h3 id="name-traces">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-traces" class="section-name selfRef">Traces</a>
        </h3>
<p id="section-4.1-1">It can be advantageous to group several related qlog traces together in a single
file. For example, it is possible to simultaneously perform logging on the
client, on the server, and on a single point on their common network path. For
analysis, it is useful to aggregate these three individual traces together into
a single file, so it can be uniquely stored, transferred, and annotated.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">The QlogFile "traces" field is an array that contains a list of individual qlog
traces. When capturing a qlog at a vantage point, it is expected that the traces
field contains a single entry. Files can be aggregated, for example as part of a
post-processing operation, by copying the traces in component to files into the
combined "traces" array of a new, aggregated qlog file.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="trace">
<section id="section-4.2">
        <h3 id="name-trace">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-trace" class="section-name selfRef">Trace</a>
        </h3>
<p id="section-4.2-1">The exact conceptual definition of a Trace can be fluid. For example, a trace
could contain all events for a single connection, for a single endpoint, for a
single measurement interval, for a single protocol, etc. In the normal use case
however, a trace is a log of a single data flow collected at a single location
or vantage point. For example, for QUIC, a single trace only contains events for
a single logical QUIC connection for either the client or the server.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">A Trace contains some metadata in addition to qlog events, defined in
<a href="#trace-def" class="auto internal xref">Figure 5</a> as:<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<span id="name-trace-definition"></span><div id="trace-def">
<figure id="figure-5">
          <div class="lang-cddl sourcecode" id="section-4.2-3.1">
<pre>
Trace = {
    ? title: text
    ? description: text
    ? common_fields: CommonFields
    ? vantage_point: VantagePoint
    events: [* Event]
}
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-trace-definition" class="selfRef">Trace definition</a>
          </figcaption></figure>
</div>
<p id="section-4.2-4">The optional "title" and "description" fields provide additional free-text
information about the trace.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">The optional "common_fields" field is described in <a href="#common-fields" class="auto internal xref">Section 7.6</a>.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">The optional "vantage_point" field is described in <a href="#vantage-point" class="auto internal xref">Section 6</a>.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7">The semantics and context of the trace can mainly be deduced from the entries in
the "common_fields" list and "vantage_point" field.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
<p id="section-4.2-8">JSON serialization example:<a href="#section-4.2-8" class="pilcrow">¶</a></p>
<span id="name-trace-example"></span><div id="trace-ex">
<figure id="figure-6">
          <div class="alignLeft art-text artwork" id="section-4.2-9.1">
<pre>
{
    "title": "Name of this particular trace (short)",
    "description": "Description for this trace (long)",
    "common_fields": {
        "ODCID": "abcde1234",
        "time_format": "relative_to_epoch",
        "reference_time": {
            "clock_type": "system",
            "epoch": "1970-01-01T00:00:00.000Z"
        },
    },
    "vantage_point": {
        "name": "backend-67",
        "type": "server"
    },
    "events": [...]
}
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-trace-example" class="selfRef">Trace example</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="traceerror">
<section id="section-4.3">
        <h3 id="name-traceerror">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-traceerror" class="section-name selfRef">TraceError</a>
        </h3>
<p id="section-4.3-1">A TraceError indicates that an attempt to find/convert a file for inclusion in
the aggregated qlog was made, but there was an error during the process. Rather
than silently dropping the erroneous file, it can be explicitly included in the
qlog file as an entry in the "traces" array, defined in <a href="#trace-error-def" class="auto internal xref">Figure 7</a> as:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<span id="name-traceerror-definition"></span><div id="trace-error-def">
<figure id="figure-7">
          <div class="lang-cddl sourcecode" id="section-4.3-2.1">
<pre>
TraceError = {
    error_description: text

    ; the original URI used for attempted find of the file
    ? uri: text
    ? vantage_point: VantagePoint
}
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-traceerror-definition" class="selfRef">TraceError definition</a>
          </figcaption></figure>
</div>
<p id="section-4.3-3">JSON serialization example:<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<span id="name-traceerror-example"></span><div id="trace-error-ex">
<figure id="figure-8">
          <div class="alignLeft art-text artwork" id="section-4.3-4.1">
<pre>
{
    "error_description": "File could not be found",
    "uri": "/srv/traces/today/latest.qlog",
    "vantage_point": { type: "server" }
}
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-traceerror-example" class="selfRef">TraceError example</a>
          </figcaption></figure>
</div>
<p id="section-4.3-5">Note that another way to combine events of different traces in a single qlog file
is through the use of the "group_id" field, discussed in <a href="#group-ids" class="auto internal xref">Section 7.4</a>.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="qlog-file-seq-schema">
<section id="section-5">
      <h2 id="name-qlogfileseq-schema">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-qlogfileseq-schema" class="section-name selfRef">QlogFileSeq schema</a>
      </h2>
<p id="section-5-1">A qlog file using the QlogFileSeq schema can be serialized to a streamable JSON
format called JSON Text Sequences (JSON-SEQ) (<span>[<a href="#RFC7464" class="cite xref">RFC7464</a>]</span>). The top-level
element in this schema defines only a small set of "header" fields and an array
of component traces. This is defined in <a href="#qlog-file-def" class="auto internal xref">Figure 3</a> as:<a href="#section-5-1" class="pilcrow">¶</a></p>
<span id="name-qlogfileseq-definition"></span><div id="qlog-file-seq-def">
<figure id="figure-9">
        <div class="lang-cddl sourcecode" id="section-5-2.1">
<pre>
QlogFileSeq = {
    ~LogFile
    trace: TraceSeq
}
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-qlogfileseq-definition" class="selfRef">QlogFileSeq definition</a>
        </figcaption></figure>
</div>
<p id="section-5-3">The QlogFileSeq schema URI is <code>urn:ietf:params:qlog:file:sequential</code>.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">QlogFile extends LogFile using the CDDL unwrap operator (~), which copies the
fields presented in <a href="#abstract-logfile" class="auto internal xref">Section 3</a>. Additionally, the required "trace"
field contains a singular trace (<a href="#trace" class="auto internal xref">Section 4.2</a>). All qlog events in the file are
related to this trace; see <a href="#traceseq" class="auto internal xref">Section 5.1</a>.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">See <a href="#format-json-seq" class="auto internal xref">Section 11.2</a> for guidance on populating the "serialization_format"
field and other serialization considerations.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">JSON-SEQ serialization example:<a href="#section-5-6" class="pilcrow">¶</a></p>
<span id="name-top-level-element"></span><div id="json-seq-ex">
<figure id="figure-10">
        <div class="alignLeft art-text artwork" id="section-5-7.1">
<pre>
// list of qlog events, serialized in accordance with RFC 7464,
// starting with a Record Separator character and ending with a
// newline.
// For display purposes, Record Separators are rendered as &lt;RS&gt;

&lt;RS&gt;{
    "file_schema": "urn:ietf:params:qlog:file:sequential",
    "serialization_format": "application/qlog+json-seq",
    "title": "Name of JSON Text Sequence qlog file (short)",
    "description": "Description for this trace file (long)",
    "trace": {
      "common_fields": {
        "protocol_types": ["QUIC","HTTP/3"],
        "group_id":"127ecc830d98f9d54a42c4f0842aa87e181a",
        "time_format": "relative_to_epoch",
        "reference_time": {
            "clock_type": "system",
            "epoch": "1970-01-01T00:00:00.000Z"
        },
      },
      "vantage_point": {
        "name":"backend-67",
        "type":"server"
      }
    }
}
&lt;RS&gt;{"time": 2, "name": "quic:parameters_set", "data": { ... } }
&lt;RS&gt;{"time": 7, "name": "quic:packet_sent", "data": { ... } }
...
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-top-level-element" class="selfRef">Top-level element</a>
        </figcaption></figure>
</div>
<div id="traceseq">
<section id="section-5.1">
        <h3 id="name-traceseq">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-traceseq" class="section-name selfRef">TraceSeq</a>
        </h3>
<p id="section-5.1-1">TraceSeq is used with QlogFileSeq. It is conceptually similar to a Trace, with
the exception that qlog events are not contained within it, but rather appended
after it in a QlogFileSeq.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<span id="name-traceseq-definition"></span><div id="trace-seq-def">
<figure id="figure-11">
          <div class="lang-cddl sourcecode" id="section-5.1-2.1">
<pre>
TraceSeq = {
    ? title: text
    ? description: text
    ? common_fields: CommonFields
    ? vantage_point: VantagePoint
}
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-traceseq-definition" class="selfRef">TraceSeq definition</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="vantage-point">
<section id="section-6">
      <h2 id="name-vantagepoint">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-vantagepoint" class="section-name selfRef">VantagePoint</a>
      </h2>
<p id="section-6-1">A VantagePoint describes the vantage point from which a trace originates,
defined in <a href="#vantage-point-def" class="auto internal xref">Figure 12</a> as:<a href="#section-6-1" class="pilcrow">¶</a></p>
<span id="name-vantagepoint-definition"></span><div id="vantage-point-def">
<figure id="figure-12">
        <div class="lang-cddl sourcecode" id="section-6-2.1">
<pre>
VantagePoint = {
    ? name: text
    type: VantagePointType
    ? flow: VantagePointType
}

; client = endpoint which initiates the connection
; server = endpoint which accepts the connection
; network = observer in between client and server
VantagePointType = "client" /
                   "server" /
                   "network" /
                   "unknown"
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-vantagepoint-definition" class="selfRef">VantagePoint definition</a>
        </figcaption></figure>
</div>
<p id="section-6-3">JSON serialization examples:<a href="#section-6-3" class="pilcrow">¶</a></p>
<span id="name-vantagepoint-example"></span><div id="vantage-point-ex">
<figure id="figure-13">
        <div class="alignLeft art-text artwork" id="section-6-4.1">
<pre>
{
    "name": "aioquic client",
    "type": "client"
}

{
    "name": "wireshark trace",
    "type": "network",
    "flow": "client"
}
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-vantagepoint-example" class="selfRef">VantagePoint example</a>
        </figcaption></figure>
</div>
<p id="section-6-5">The flow field is only required if the type is "network" (for example, the trace
is generated from a packet capture). It is used to disambiguate events like
"packet sent" and "packet received". This is indicated explicitly because for
multiple reasons (e.g., privacy) data from which the flow direction can be
otherwise inferred (e.g., IP addresses) might not be present in the logs.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">Meaning of the different values for the flow field:
  * "client" indicates that this vantage point follows client data flow semantics (a
    "packet sent" event goes in the direction of the server).
  * "server" indicates that this vantage point follow server data flow semantics (a
    "packet sent" event goes in the direction of the client).
  * "unknown" indicates that the flow's direction is unknown.<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">Depending on the context, tools confronted with "unknown" values in the
vantage_point can either try to heuristically infer the semantics from
protocol-level domain knowledge (e.g., in QUIC, the client always sends the first
packet) or give the user the option to switch between client and server
perspectives manually.<a href="#section-6-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="abstract-event">
<section id="section-7">
      <h2 id="name-abstract-event-class">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-abstract-event-class" class="section-name selfRef">Abstract Event Class</a>
      </h2>
<p id="section-7-1">Events are logged at a time instant and convey specific details of the logging
use case. An abstract Event class containing fields common to all events is
defined in <a href="#event-def" class="auto internal xref">Figure 14</a>.<a href="#section-7-1" class="pilcrow">¶</a></p>
<span id="name-event-definition"></span><div id="event-def">
<figure id="figure-14">
        <div class="lang-cddl sourcecode" id="section-7-2.1">
<pre>
Event = {
    time: float64
    name: text
    data: $ProtocolEventData
    ? path: PathID
    ? time_format: TimeFormat
    ? protocol_types: ProtocolTypeList
    ? group_id: GroupID
    ? system_info: SystemInformation

    ; events can contain any amount of custom fields
    * text =&gt; any
}
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-event-definition" class="selfRef">Event definition</a>
        </figcaption></figure>
</div>
<p id="section-7-3">Each qlog event <span class="bcp14">MUST</span> contain the mandatory fields: "time"
(<a href="#time-based-fields" class="auto internal xref">Section 7.1</a>), "name" (<a href="#event-types-and-schema" class="auto internal xref">Section 8</a>), and "data" (<a href="#data-field" class="auto internal xref">Section 8.2</a>).<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">Each qlog event is an instance of a concrete event type that derives from the
abstract Event class; see <a href="#event-types-and-schema" class="auto internal xref">Section 8</a>. They extend it by defining
the specific values and semantics of common fields, in particular the <code>name</code> and
<code>data</code> fields. Furthermore, they can optionally add custom fields.<a href="#section-7-4" class="pilcrow">¶</a></p>
<p id="section-7-5">Each qlog event <span class="bcp14">MAY</span> contain the optional fields: "time_format"
(<a href="#time-based-fields" class="auto internal xref">Section 7.1</a>), "protocol_type" (<a href="#protocol-type-field" class="auto internal xref">Section 7.3</a>), "trigger"
(<a href="#trigger-field" class="auto internal xref">Section 8.2.1</a>), and "group_id" (<a href="#group-ids" class="auto internal xref">Section 7.4</a>).<a href="#section-7-5" class="pilcrow">¶</a></p>
<p id="section-7-6">Multiple events can appear in a Trace or TraceSeq and they might contain fields
with identical values. It is possible to optimize out this duplication using
"common_fields" (<a href="#common-fields" class="auto internal xref">Section 7.6</a>).<a href="#section-7-6" class="pilcrow">¶</a></p>
<p id="section-7-7">Example qlog event:<a href="#section-7-7" class="pilcrow">¶</a></p>
<span id="name-event-example"></span><div id="event-ex">
<figure id="figure-15">
        <div class="alignLeft art-text artwork" id="section-7-8.1">
<pre>
{
    "time": 1553986553572,

    "name": "quic:packet_sent",
    "data": { ... },

    "protocol_types":  ["QUIC","HTTP/3"],
    "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",

    "time_format": "relative_to_epoch",

    "ODCID": "127ecc830d98f9d54a42c4f0842aa87e181a"
}
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-event-example" class="selfRef">Event example</a>
        </figcaption></figure>
</div>
<div id="time-based-fields">
<section id="section-7.1">
        <h3 id="name-timestamps">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-timestamps" class="section-name selfRef">Timestamps</a>
        </h3>
<p id="section-7.1-1">Each event <span class="bcp14">MUST</span> include a "time" field to indicate the timestamp that it
occurred. It is a duration measured from some point in time, in units of ???.
There are several options for generating and logging timestamps, these are
governed by the ReferenceTime type (optionally included in the "reference_time"
field contained in a trace's "common_fields" (<a href="#common-fields" class="auto internal xref">Section 7.6</a>)) and TimeFormat
type (optionally included in the "time_format" field contained in the event
itself, or a trace's "common_fields").<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">There is no requirement that events in the same trace use the same time format.
However, using a single time format for related events can make them easier to
analyze.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3">The reference time is defined as:<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<span id="name-referencetime-definition"></span><div id="reference-time-def">
<figure id="figure-16">
          <div class="lang-cddl sourcecode" id="section-7.1-4.1">
<pre>
ReferenceTime = {
    clock_type: "system" / "monotonic" / text .default "system"
    epoch: RFC3339DateTime / "unknown" .default "1970-01-01T00:00:00.000Z"

    ? wall_clock_time: RFC3339DateTime
}

RFC3339DateTime = text
</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-referencetime-definition" class="selfRef">ReferenceTime definition</a>
          </figcaption></figure>
</div>
<p id="section-7.1-5">The required "clock_type" field represents the type of clock used for time
measurements. The value "system" represents a clock that uses system time,
commonly measured against a chosen or well-known epoch. System time can jump
forward or back. The value "monotonic" represents a clock that uses monotonic
time, measured against an arbitrary and opaque epoch. Monotonic time is
generally guaranteed to never go backwards.<a href="#section-7.1-5" class="pilcrow">¶</a></p>
<p id="section-7.1-6">The required "epoch" field is the start of the ReferenceTime. When using the
"system" clock type, the epoch field <span class="bcp14">SHOULD</span> have a date/time value using the
format defined in <span>[<a href="#RFC3339" class="cite xref">RFC3339</a>]</span>. However, the value "unknown" <span class="bcp14">MAY</span> be used.<a href="#section-7.1-6" class="pilcrow">¶</a></p>
<p id="section-7.1-7">When using the "monotonic" clock type, the epoch field <span class="bcp14">MUST</span> have the value
"unknown".<a href="#section-7.1-7" class="pilcrow">¶</a></p>
<p id="section-7.1-8">The optional "wall_clock_time" field can be used to provide an approximate time
that logging commenced if the epoch value is "unknown". However, conversion of
timestamps to calendar time based on wall clock times cannot be safely relied
on.<a href="#section-7.1-8" class="pilcrow">¶</a></p>
<p id="section-7.1-9">The time format is defined as:<a href="#section-7.1-9" class="pilcrow">¶</a></p>
<span id="name-timeformat-definition"></span><div id="time-format-def">
<figure id="figure-17">
          <div class="lang-cddl sourcecode" id="section-7.1-10.1">
<pre>
TimeFormat = "relative_to_epoch" /
             "relative_to_previous_event" .default "relative_to_epoch"
</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-timeformat-definition" class="selfRef">TimeFormat definition</a>
          </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-7.1-11">
          <dt id="section-7.1-11.1">relative_to_epoch:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-11.2">
            <p id="section-7.1-11.2.1">A duration relative to the ReferenceTime "epoch" field. This approach uses the
largest amount of characters. It is good for stateless loggers. This is the default value of the "time_format" field.<a href="#section-7.1-11.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-11.3">relative_to_previous_event:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-11.4">
            <p id="section-7.1-11.4.1">A delta-encoded value, based on the previously logged value. The first event
in a trace is always relative to the ReferenceTime. This approach uses the
least amount of characters. It is suitable for stateful loggers.<a href="#section-7.1-11.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-7.1-12">Events in each individual trace <span class="bcp14">SHOULD</span> be logged in strictly ascending timestamp
order (though not necessarily absolute value, for the "relative_to_previous_event"
format). Tools <span class="bcp14">MAY</span> sort all events on the timestamp before processing them,
though are not required to (as this could impose a significant processing
overhead). This can be a problem especially for multi-threaded and/or streaming
loggers, who could consider using a separate post-processor to order qlog events
in time if a tool do not provide this feature.<a href="#section-7.1-12" class="pilcrow">¶</a></p>
<p id="section-7.1-13">Tools <span class="bcp14">SHOULD NOT</span> assume the ability to derive the absolute timestamp of an event
from qlog traces. Tools should not rely on timestamps to be consistent across
traces, even those generated by the same logging endpoint. For reasons of
privacy, the reference time <span class="bcp14">MAY</span> have minimization or anonymization applied.<a href="#section-7.1-13" class="pilcrow">¶</a></p>
<p id="section-7.1-14">Example of a log using the relative_to_epoch format:<a href="#section-7.1-14" class="pilcrow">¶</a></p>
<span id="name-relative-to-epoch-timestamp"></span><div id="rel-epoch-time-ex">
<figure id="figure-18">
          <div class="alignLeft art-text artwork" id="section-7.1-15.1">
<pre>
"common_fields": {
    "time_format": "relative_to_epoch",
    "reference_time": {
          "clock_type": "system",
          "epoch": "1970-01-01T00:00:00.000Z"
    },
},
"events": [
  {
    "time": 1553986553572,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 1553986553577,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 1553986553587,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 1553986553597,
    "name": "quic:packet_received",
    "data": { ... },
  },
]
</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-relative-to-epoch-timestamp" class="selfRef">Relative to epoch timestamps</a>
          </figcaption></figure>
</div>
<p id="section-7.1-16">Example of a log using the relative_to_previous_event format:<a href="#section-7.1-16" class="pilcrow">¶</a></p>
<span id="name-relative-to-previous-event-"></span><div id="rel-last-event-time-ex">
<figure id="figure-19">
          <div class="alignLeft art-text artwork" id="section-7.1-17.1">
<pre>
"common_fields": {
    "time_format": "relative_to_previous_event",
    "reference_time": {
          "clock_type": "system",
          "epoch": "1970-01-01T00:00:00.000Z"
    },
},
"events": [
  {
    "time": 1553986553572,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 5,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 10,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 10,
    "name": "quic:packet_received",
    "data": { ... },
  },
]
</pre>
</div>
<figcaption><a href="#figure-19" class="selfRef">Figure 19</a>:
<a href="#name-relative-to-previous-event-" class="selfRef">Relative-to-previous-event timestamps</a>
          </figcaption></figure>
</div>
<p id="section-7.1-18">Example of a monotonic log using the relative_to_epoch format:<a href="#section-7.1-18" class="pilcrow">¶</a></p>
<span id="name-monotonic-timestamps"></span><div id="mono-time-ex">
<figure id="figure-20">
          <div class="alignLeft art-text artwork" id="section-7.1-19.1">
<pre>
"common_fields": {
    "time_format": "relative_to_epoch",
    "reference_time": {
          "clock_type": monotonic,
          "epoch": "unknown",
          "wall_clock_time": "2024-10-10T10:10:10.000Z"
    },
},
"events": [
  {
    "time": 0,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 5,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 15,
    "name": "quic:packet_received",
    "data": { ... },
  },
  {
    "time": 25,
    "name": "quic:packet_received",
    "data": { ... },
  },
]
</pre>
</div>
<figcaption><a href="#figure-20" class="selfRef">Figure 20</a>:
<a href="#name-monotonic-timestamps" class="selfRef">Monotonic timestamps</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="path-field">
<section id="section-7.2">
        <h3 id="name-path">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-path" class="section-name selfRef">Path</a>
        </h3>
<p id="section-7.2-1">A qlog event can be associated with a single "network path" (usually, but not
always, identified by a 4-tuple of IP addresses and ports). In many cases, the
path will be the same for all events in a given trace, and does not need to be
logged explicitly with each event. In this case, the "path" field can be omitted
(in which case the default value of "" is assumed) or reflected in
"common_fields" instead (see <a href="#common-fields" class="auto internal xref">Section 7.6</a>).<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">However, in some situations, such as during QUIC's Connection Migration or when
using Multipath features, it is useful to be able to split events across
multiple (concurrent) paths.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2-3">Definition:<a href="#section-7.2-3" class="pilcrow">¶</a></p>
<span id="name-pathid-definition"></span><div id="path-def">
<figure id="figure-21">
          <div class="lang-cddl sourcecode" id="section-7.2-4.1">
<pre>
PathID = text .default ""
</pre>
</div>
<figcaption><a href="#figure-21" class="selfRef">Figure 21</a>:
<a href="#name-pathid-definition" class="selfRef">PathID definition</a>
          </figcaption></figure>
</div>
<p id="section-7.2-5">The "path" field is an identifier that is associated with a single network path.
This document intentionally does not define further how to choose this
identifier's value per-path or how to potentially log other parameters that can
be associated with such a path. This is left for other documents. Implementers
are free to encode path information directly into the PathID or to log
associated info in a separate event. For example, QUIC has the "path_assigned"
event to couple the PathID value to a specific path configuration, see
<span>[<a href="#QLOG-QUIC" class="cite xref">QLOG-QUIC</a>]</span>.<a href="#section-7.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="protocol-type-field">
<section id="section-7.3">
        <h3 id="name-protocoltypelist-and-protoc">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-protocoltypelist-and-protoc" class="section-name selfRef">ProtocolTypeList and ProtocolType</a>
        </h3>
<p id="section-7.3-1">An event's "protocol_types" array field indicates to which protocols (or protocol
"stacks") this event belongs. This allows a single qlog file to aggregate traces
of different protocols (e.g., a web server offering both TCP+HTTP/2 and
QUIC+HTTP/3 connections).<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<span id="name-protocoltypelist-and-protoco"></span><div id="protocol-type-def">
<figure id="figure-22">
          <div class="lang-cddl sourcecode" id="section-7.3-2.1">
<pre>
ProtocolTypeList = [+ $ProtocolType]

$ProtocolType /= "UNKNOWN"
</pre>
</div>
<figcaption><a href="#figure-22" class="selfRef">Figure 22</a>:
<a href="#name-protocoltypelist-and-protoco" class="selfRef">ProtocolTypeList and ProtocolType socket definition</a>
          </figcaption></figure>
</div>
<p id="section-7.3-3">For example, QUIC and HTTP/3 events have the "QUIC" and "HTTP/3" protocol_type
entry values, see <span>[<a href="#QLOG-QUIC" class="cite xref">QLOG-QUIC</a>]</span> and <span>[<a href="#QLOG-H3" class="cite xref">QLOG-H3</a>]</span>.<a href="#section-7.3-3" class="pilcrow">¶</a></p>
<p id="section-7.3-4">Typically however, all events in a single trace are of the same few protocols, and
this array field is logged once in "common_fields", see <a href="#common-fields" class="auto internal xref">Section 7.6</a>.<a href="#section-7.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="group-ids">
<section id="section-7.4">
        <h3 id="name-grouping">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-grouping" class="section-name selfRef">Grouping</a>
        </h3>
<p id="section-7.4-1">As discussed in <a href="#trace" class="auto internal xref">Section 4.2</a>, a single qlog file can contain several traces taken
from different vantage points. However, a single trace from one endpoint can also
contain events from a variety of sources. For example, a server implementation
might choose to log events for all incoming connections in a single large
(streamed) qlog file. As such, a method for splitting up events belonging
to separate logical entities is required.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2">The simplest way to perform this splitting is by associating a "group id"
to each event that indicates to which conceptual "group" each event belongs. A
post-processing step can then extract events per group. However, this group
identifier can be highly protocol and context-specific. In the example above,
the QUIC "Original Destination Connection ID" could be used to uniquely identify a
connection. As such, they might add a "ODCID" field to each event. However, a
middlebox logging IP or TCP traffic might rather use four-tuples to identify
connections, and add a "four_tuple" field.<a href="#section-7.4-2" class="pilcrow">¶</a></p>
<p id="section-7.4-3">As such, to provide consistency and ease of tooling in cross-protocol and
cross-context setups, qlog instead defines the common "group_id" field, which
contains a string value. Implementations are free to use their preferred string
serialization for this field, so long as it contains a unique value per logical
group. Some examples can be seen in <a href="#group-id-ex" class="auto internal xref">Figure 24</a>.<a href="#section-7.4-3" class="pilcrow">¶</a></p>
<span id="name-groupid-definition"></span><div id="group-id-def">
<figure id="figure-23">
          <div class="lang-cddl sourcecode" id="section-7.4-4.1">
<pre>
GroupID = text
</pre>
</div>
<figcaption><a href="#figure-23" class="selfRef">Figure 23</a>:
<a href="#name-groupid-definition" class="selfRef">GroupID definition</a>
          </figcaption></figure>
</div>
<p id="section-7.4-5">JSON serialization example for events grouped by four tuples
and QUIC connection IDs:<a href="#section-7.4-5" class="pilcrow">¶</a></p>
<span id="name-groupid-example"></span><div id="group-id-ex">
<figure id="figure-24">
          <div class="alignLeft art-text artwork" id="section-7.4-6.1">
<pre>
"events": [
    {
        "time": 1553986553579,
        "protocol_types": ["TCP", "TLS", "HTTP2"],
        "group_id": "ip1=2001:67c:1232:144:9498:6df6:f450:110b,
                   ip2=2001:67c:2b0:1c1::198,port1=59105,port2=80",
        "name": "quic:packet_received",
        "data": { ... }
    },
    {
        "time": 1553986553581,
        "protocol_types": ["QUIC","HTTP/3"],
        "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
        "name": "quic:packet_sent",
        "data": { ... }
    }
]
</pre>
</div>
<figcaption><a href="#figure-24" class="selfRef">Figure 24</a>:
<a href="#name-groupid-example" class="selfRef">GroupID example</a>
          </figcaption></figure>
</div>
<p id="section-7.4-7">Note that in some contexts (for example a Multipath transport protocol) it might
make sense to add additional contextual per-event fields (for example "path_id"),
rather than use the group_id field for that purpose.<a href="#section-7.4-7" class="pilcrow">¶</a></p>
<p id="section-7.4-8">Note also that, typically, a single trace only contains events belonging to a
single logical group (for example, an individual QUIC connection). As such,
instead of logging the "group_id" field with an identical value for each event
instance, this field is typically logged once in "common_fields", see
<a href="#common-fields" class="auto internal xref">Section 7.6</a>.<a href="#section-7.4-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="systeminformation">
<section id="section-7.5">
        <h3 id="name-systeminformation">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-systeminformation" class="section-name selfRef">SystemInformation</a>
        </h3>
<p id="section-7.5-1">The "system_info" field can be used to record system-specific details related to an
event. This is useful, for instance, where an application splits work across
CPUs, processes, or threads and events for a single trace occur on potentially
different combinations thereof. Each field is optional to support deployment
diversity.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<div class="lang-cddl sourcecode" id="section-7.5-2">
<pre>
SystemInformation = {
  ? processor_id: uint32
  ? process_id: uint32
  ? thread_id: uint32
}
</pre><a href="#section-7.5-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="common-fields">
<section id="section-7.6">
        <h3 id="name-commonfields">
<a href="#section-7.6" class="section-number selfRef">7.6. </a><a href="#name-commonfields" class="section-name selfRef">CommonFields</a>
        </h3>
<p id="section-7.6-1">As discussed in the previous sections, information for a typical qlog event varies
in three main fields: "time", "name" and associated data. Additionally, there are
also several more advanced fields that allow mixing events from different
protocols and contexts inside of the same trace (for example "protocol_types" and
"group_id"). In most "normal" use cases however, the values of these advanced
fields are consistent for each event instance (for example, a single trace
contains events for a single QUIC connection).<a href="#section-7.6-1" class="pilcrow">¶</a></p>
<p id="section-7.6-2">To reduce file size and making logging easier, qlog uses the "common_fields" list
to indicate those fields and their values that are shared by all events in this
component trace. This prevents these fields from being logged for each individual
event. An example of this is shown in <a href="#common-fields-ex" class="auto internal xref">Figure 25</a>.<a href="#section-7.6-2" class="pilcrow">¶</a></p>
<span id="name-commonfields-example"></span><div id="common-fields-ex">
<figure id="figure-25">
          <div class="alignLeft art-text artwork" id="section-7.6-3.1">
<pre>
JSON serialization with repeated field values
per-event instance:

{
    "events": [{
            "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
            "protocol_type": ["QUIC","HTTP/3"],
            "time_format": "relative_to_epoch",
            "reference_time": {
              "clock_type": "system",
              "epoch": "2019-03-39T:22:55:53.572Z"
            },

            "time": 2,
            "name": "quic:packet_received",
            "data": { ... }
        },{
            "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
            "protocol_type": ["QUIC","HTTP/3"],
            "time_format": "relative_to_epoch",
            "reference_time": {
              "clock_type": "system",
              "epoch": "2019-03-39T:22:55:53.572Z"
            },

            "time": 7,
            "name": "http:frame_parsed",
            "data": { ... }
        }
    ]
}

JSON serialization with repeated field values instead
extracted to common_fields:

{
    "common_fields": {
        "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
        "protocol_type": ["QUIC","HTTP/3"],
        "time_format": "relative_to_epoch",
        "reference_time": {
            "clock_type": "system",
            "epoch": "2019-03-39T:22:55:53.572Z"
        },
    },
    "events": [
        {
            "time": 2,
            "name": "quic:packet_received",
            "data": { ... }
        },{
            "time": 7,
            "name": "http:frame_parsed",
            "data": { ... }
        }
    ]
}
</pre>
</div>
<figcaption><a href="#figure-25" class="selfRef">Figure 25</a>:
<a href="#name-commonfields-example" class="selfRef">CommonFields example</a>
          </figcaption></figure>
</div>
<p id="section-7.6-4">An event's "common_fields" field is a generic dictionary of key-value pairs, where the
key is always a string and the value can be of any type, but is typically also a
string or number. As such, unknown entries in this dictionary <span class="bcp14">MUST</span> be disregarded
by the user and tools (i.e., the presence of an unknown field is explicitly NOT an
error).<a href="#section-7.6-4" class="pilcrow">¶</a></p>
<p id="section-7.6-5">The list of default qlog fields that are typically logged in common_fields (as
opposed to as individual fields per event instance) are shown in the listing
below:<a href="#section-7.6-5" class="pilcrow">¶</a></p>
<span id="name-commonfields-definition"></span><div id="common-fields-def">
<figure id="figure-26">
          <div class="lang-cddl sourcecode" id="section-7.6-6.1">
<pre>
CommonFields = {
    ? path: PathID
    ? time_format: TimeFormat
    ? reference_time: ReferenceTime
    ? protocol_types: ProtocolTypeList
    ? group_id: GroupID
    * text =&gt; any
}
</pre>
</div>
<figcaption><a href="#figure-26" class="selfRef">Figure 26</a>:
<a href="#name-commonfields-definition" class="selfRef">CommonFields definition</a>
          </figcaption></figure>
</div>
<p id="section-7.6-7">Tools <span class="bcp14">MUST</span> be able to deal with these fields being defined either on each event
individually or combined in common_fields. Note that if at least one event in a
trace has a different value for a given field, this field <span class="bcp14">MUST NOT</span> be added to
common_fields but instead defined on each event individually. Good example of such
fields are "time" and "data", who are divergent by nature.<a href="#section-7.6-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="event-types-and-schema">
<section id="section-8">
      <h2 id="name-concrete-event-types-and-ev">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-concrete-event-types-and-ev" class="section-name selfRef">Concrete Event Types and Event Schema</a>
      </h2>
<p id="section-8-1">Concrete event types belong to event categories, both contained in event schema.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">A single event schema can either define a new namespace, or extend an existing
namespace with new categories. New namespaces <span class="bcp14">MUST</span> be registered using a
non-empty namespace identifier text identifier using only characters in the
unreserved range; see <span><a href="https://rfc-editor.org/rfc/rfc3986#section-2.3" class="relref">Section 2.3</a> of [<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>. Namespace are mutable and <span class="bcp14">MAY</span>
be extended with categories.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Event categories <span class="bcp14">MUST</span> belong to a single event namespace. They <span class="bcp14">MUST</span> have a
registered non-empty globally-unique text identifier using only characters in
the URI unreserved range; see <span><a href="https://rfc-editor.org/rfc/rfc3986#section-2.3" class="relref">Section 2.3</a> of [<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>. They <span class="bcp14">MUST</span> have a
single URI <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span> that <span class="bcp14">MUST</span> be absolute. The URI <span class="bcp14">MUST</span> include the namespace
identifier. The URI <span class="bcp14">MUST</span> include the category identifer using a fragment
identifier (characters after a "#" in the URI). Event categories are immutable
and <span class="bcp14">MUST NOT</span> be extended with events. Registration guidance and requirement for
category URIs are provided in <a href="#event-schema-reg" class="auto internal xref">Section 8.1</a>.<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">Concrete event types <span class="bcp14">MUST</span> belong to a single event category and <span class="bcp14">MUST</span> have a
non-empty name of type <code>text</code>.<a href="#section-8-4" class="pilcrow">¶</a></p>
<p id="section-8-5">The value of a qlog event <code>name</code> field <span class="bcp14">MUST</span> be the concatenation of category
identifier, colon (':'), and event type identifier. By virtue of the identifier
requirements described above, event names are globally-unique. Thus, log files
can contain events from multiple schemas without the risk of name collisions.<a href="#section-8-5" class="pilcrow">¶</a></p>
<p id="section-8-6">Implementations that might record concrete event types belonging to a category
in an event schema <span class="bcp14">SHOULD</span> list all category identifiers in use. This is achieved
by including the appropriate URIs in the <code>event_schemas</code> field of the abstract
LogFile class (<a href="#abstract-logfile" class="auto internal xref">Section 3</a>). The <code>event_schemas</code> is a hint to tools
about the possible event categories (and event types contained therein) that a
qlog file might contain. The file <span class="bcp14">MAY</span> contain event types that do not belong to
a listed category identifier. Inversely, not all event types associated with a
category listed in <code>event_schemas</code> are guaranteed to be logged in a qlog file.
Tools <span class="bcp14">MUST NOT</span> treat either of these as an error; see <a href="#tooling" class="auto internal xref">Section 13</a>.<a href="#section-8-6" class="pilcrow">¶</a></p>
<p id="section-8-7">In the following hypothetical example, a qlog file contains events belonging to
two categories in the generic event schema defined in this document
(<a href="#generic-event-schema" class="auto internal xref">Section 9</a>), to three categories in an event schema named <code>rick</code>
specified in a hypothetical RFC, and to three more categories from a private
event schema named pickle. The standardized category URIs use a URN format, the
private categories use a URI with domain name.<a href="#section-8-7" class="pilcrow">¶</a></p>
<span id="name-example-event_categories-se"></span><div id="event-categories">
<figure id="figure-27">
        <div class="alignLeft art-text artwork" id="section-8-8.1">
<pre>
"event_schemas": [
  "urn:ietf:params:qlog:events:gen#loglevel",
  "urn:ietf:params:qlog:events:gen#sim",
  "urn:ietf:params:qlog:events:rick#roll",
  "urn:ietf:params:qlog:events:rick#astley",
  "urn:ietf:params:qlog:events:rick#moranis",
  "https://example.com/032024/pickle.html#pepper",
  "https://example.com/032024/pickle.html#lilly",
  "https://example.com/032024/pickle.html#rick"
]
</pre>
</div>
<figcaption><a href="#figure-27" class="selfRef">Figure 27</a>:
<a href="#name-example-event_categories-se" class="selfRef">Example event_categories serialization</a>
        </figcaption></figure>
</div>
<div id="event-schema-reg">
<section id="section-8.1">
        <h3 id="name-event-schema-and-event-cate">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-event-schema-and-event-cate" class="section-name selfRef">Event Schema and Event Category URIs</a>
        </h3>
<p id="section-8.1-1">Event schema defined by RFCs <span class="bcp14">MUST</span> register all categories in the "qlog event
category URIs" registry and <span class="bcp14">SHOULD</span> use a URN of the form
<code>urn:ietf:params:qlog:events:&lt;namespace identifier&gt;#&lt;category identifier&gt;</code>,
where <code>&lt;category identifier&gt;</code> is globally unique. For example, this document
defines the generic event schema (<a href="#generic-event-schema" class="auto internal xref">Section 9</a>) that uses the <code>gen</code>
namespace containing the <code>loglevel</code> and <code>sim</code> categories. Other examples of
event schema define the <code>quic</code> <span>[<a href="#QLOG-QUIC" class="cite xref">QLOG-QUIC</a>]</span> and <code>http</code> <span>[<a href="#QLOG-H3" class="cite xref">QLOG-H3</a>]</span> namespaces.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">Private or non-standard event categories <span class="bcp14">MAY</span> be registered in the "qlog event
category URIs" registry but <span class="bcp14">MUST NOT</span> use a URN of the form
<code>urn:ietf:params:qlog:events:&lt;namespace identifier&gt;#&lt;category identifier&gt;</code>. URIs
that contain a domain name <span class="bcp14">SHOULD</span> also contain a month-date in the form mmyyyy.
For example,
"https://example.org/072024/customeventschema#globallyuniquecategory". The
definition of the category and assignment of the URI <span class="bcp14">MUST</span> have been authorized
by the owner of the domain name on or very close to that date. This avoids
problems when domain names change ownership. The URI does not need to be
dereferencable, allowing for confidential use or to cover the case where the log
file schema continues to be used after the organization that defined them ceases
to exist.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3">The "qlog event category URIs" registry operates under the Expert Review policy,
per <span><a href="https://rfc-editor.org/rfc/rfc8126#section-4.5" class="relref">Section 4.5</a> of [<a href="#RFC8126" class="cite xref">RFC8126</a>]</span>.  When reviewing requests, the expert <span class="bcp14">MUST</span> check
that the URI is appropriate to the event schema and satisfies the requirements
in <a href="#event-types-and-schema" class="auto internal xref">Section 8</a> and this section. A request to register a private
or non-standard category URI using a URN of the form
<code>urn:ietf:params:qlog:events:&lt;namespace identifier&gt;#&lt;category identifier</code> <span class="bcp14">MUST</span> be
rejected.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<p id="section-8.1-4">Registration requests should use the following template:<a href="#section-8.1-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.1-5">
          <dt id="section-8.1-5.1">Event Category URI:</dt>
          <dd style="margin-left: 1.5em" id="section-8.1-5.2">
            <p id="section-8.1-5.2.1">[the event category identifier]<a href="#section-8.1-5.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-5.3">Description:</dt>
          <dd style="margin-left: 1.5em" id="section-8.1-5.4">
            <p id="section-8.1-5.4.1">[a description of the event category]<a href="#section-8.1-5.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-5.5">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-8.1-5.6">
            <p id="section-8.1-5.6.1">[to a specification defining the event schema defining the event category]<a href="#section-8.1-5.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="data-field">
<section id="section-8.2">
        <h3 id="name-extending-the-data-field">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-extending-the-data-field" class="section-name selfRef">Extending the Data Field</a>
        </h3>
<p id="section-8.2-1">An event's "data" field is a generic key-value map (e.g., JSON object). It
defines the per-event metadata that is to be logged. Its specific subfields and
their semantics are defined per concrete event type. For example, data field
definitions for QUIC and HTTP/3 can be found in <span>[<a href="#QLOG-QUIC" class="cite xref">QLOG-QUIC</a>]</span> and <span>[<a href="#QLOG-H3" class="cite xref">QLOG-H3</a>]</span>.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">In order to keep qlog fully extensible, two separate CDDL extension points
("sockets" or "plugs") are used to fully define data fields.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<p id="section-8.2-3">Firstly, to allow existing data field definitions to be extended (for example by
adding an additional field needed for a new protocol feature), a CDDL "group
socket" is used. This takes the form of a subfield with a name of
<code>* $$CATEGORY-NAME-extension</code>. This field acts as a placeholder that can later be
replaced with newly defined fields by assigning them to the socket with the
<code>//=</code> operator. Multiple extensions can be assigned to the same group socket. An
example is shown in <a href="#groupsocket-extension-example" class="auto internal xref">Figure 28</a>.<a href="#section-8.2-3" class="pilcrow">¶</a></p>
<span id="name-example-of-using-a-generic-"></span><div id="groupsocket-extension-example">
<figure id="figure-28">
          <div class="alignLeft art-text artwork" id="section-8.2-4.1">
<pre>
; original definition in document A
MyCategoryEventX = {
    field_a: uint8

    * $$mycategory-eventx-extension
}

; later extension of EventX in document B
$$mycategory-eventx-extension //= (
  ? additional_field_b: bool
)

; another extension of EventX in document C
$$mycategory-eventx-extension //= (
  ? additional_field_c: text
)

; if document A, B and C are then used in conjunction,
; the combined MyCategoryEventX CDDL is equivalent to this:
MyCategoryEventX = {
    field_a: uint8

    ? additional_field_b: bool
    ? additional_field_c: text
}
</pre>
</div>
<figcaption><a href="#figure-28" class="selfRef">Figure 28</a>:
<a href="#name-example-of-using-a-generic-" class="selfRef">Example of using a generic CDDL group socket to extend an existing event data definition</a>
          </figcaption></figure>
</div>
<p id="section-8.2-5">Secondly, to allow documents to define fully new event data field definitions
(as opposed to extend existing ones), a CDDL "type socket" is used. For this
purpose, the type of the "data" field in the qlog Event type (see <a href="#event-def" class="auto internal xref">Figure 14</a>)
is the extensible <code>$ProtocolEventData</code> type. This field acts as an open enum of
possible types that are allowed for the data field. As such, any new event data
field is defined as its own CDDL type and later merged with the existing
<code>$ProtocolEventData</code> enum using the <code>/=</code> extension operator. Any generic
key-value map type can be assigned to <code>$ProtocolEventData</code> (the only common
"data" subfield defined in this document is the optional <code>trigger</code> field, see
<a href="#trigger-field" class="auto internal xref">Section 8.2.1</a>). An example of this setup is shown in
<a href="#protocoleventdata-def" class="auto internal xref">Figure 29</a>.<a href="#section-8.2-5" class="pilcrow">¶</a></p>
<span id="name-protocoleventdata-extension"></span><div id="protocoleventdata-def">
<figure id="figure-29">
          <div class="alignLeft art-text artwork" id="section-8.2-6.1">
<pre>
; We define two separate events in a single document
MyCategoryEvent1 /= {
    field_1: uint8

    ? trigger: text

    * $$mycategory-event1-extension
}

MyCategoryEvent2 /= {
    field_2: bool

    ? trigger: text

    * $$mycategory-event2-extension
}

; the events are both merged with the existing
; $ProtocolEventData type enum
$ProtocolEventData /= MyCategoryEvent1 / MyCategoryEvent2

; the "data" field of a qlog event can now also be of type
; MyCategoryEvent1 and MyCategoryEvent2
</pre>
</div>
<figcaption><a href="#figure-29" class="selfRef">Figure 29</a>:
<a href="#name-protocoleventdata-extension" class="selfRef">ProtocolEventData extension</a>
          </figcaption></figure>
</div>
<p id="section-8.2-7">Documents defining new qlog events <span class="bcp14">MUST</span> properly extend <code>$ProtocolEventData</code>
when defining data fields to enable automated validation of aggregated qlog
schemas. Furthermore, they <span class="bcp14">SHOULD</span> properly add a <code>* $$CATEGORY-NAME-extension</code>
extension field to newly defined event data to allow the new events to be
properly extended by other documents.<a href="#section-8.2-7" class="pilcrow">¶</a></p>
<p id="section-8.2-8">A combined but purely illustrative example of the use of both extension points
for a conceptual QUIC "packet_sent" event is shown in <a href="#data-ex" class="auto internal xref">Figure 30</a>:<a href="#section-8.2-8" class="pilcrow">¶</a></p>
<span id="name-example-of-an-extended-data"></span><div id="data-ex">
<figure id="figure-30">
          <div class="alignLeft art-text artwork" id="section-8.2-9.1">
<pre>
; defined in the main QUIC event document
TransportPacketSent = {
    ? packet_size: uint16
    header: PacketHeader
    ? frames:[* QuicFrame]
    ? trigger: "pto_probe" /
               "retransmit_timeout" /
               "bandwidth_probe"

    * $$transport-packetsent-extension
}

; Add the event to the global list of recognized qlog events
$ProtocolEventData /= TransportPacketSent

; Defined in a separate document that describes a
; theoretical QUIC protocol extension
$$transport-packetsent-extension //= (
  ? additional_field: bool
)

; If both documents are utilized at the same time,
; the following JSON serialization would pass an automated
; CDDL schema validation check:

{
  "time": 123456,
  "category": "transport",
  "name": "packet_sent",
  "data": {
      "packet_size": 1280,
      "header": {
          "packet_type": "1RTT",
          "packet_number": 123
      },
      "frames": [
          {
              "frame_type": "stream",
              "length": 1000,
              "offset": 456
          },
          {
              "frame_type": "padding"
          }
      ],
      additional_field: true
  }
}
</pre>
</div>
<figcaption><a href="#figure-30" class="selfRef">Figure 30</a>:
<a href="#name-example-of-an-extended-data" class="selfRef">Example of an extended 'data' field for a conceptual QUIC packet_sent event</a>
          </figcaption></figure>
</div>
<div id="trigger-field">
<section id="section-8.2.1">
          <h4 id="name-triggers">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-triggers" class="section-name selfRef">Triggers</a>
          </h4>
<p id="section-8.2.1-1">Sometimes, additional information is needed in the case where a single event can
be caused by a variety of other events. In the normal case, the context of the
surrounding log messages gives a hint as to which of these other events was the
cause. However, in highly-parallel and optimized implementations, corresponding
log messages might separated in time. Another option is to explicitly indicate
these "triggers" in a high-level way per-event to get more fine-grained
information without much additional overhead.<a href="#section-8.2.1-1" class="pilcrow">¶</a></p>
<p id="section-8.2.1-2">In qlog, the optional "trigger" field contains a string value describing
the reason (if any) for this event instance occurring, see
<a href="#data-field" class="auto internal xref">Section 8.2</a>. While this "trigger" field could be a property of the
qlog Event itself, it is instead a property of the "data" field instead.
This choice was made because many event types do not include a trigger
value, and having the field at the Event-level would cause overhead in
some serializations. Additional information on the trigger can be added
in the form of additional member fields of the "data" field value, yet
this is highly implementation-specific, as are the trigger field's
string values.<a href="#section-8.2.1-2" class="pilcrow">¶</a></p>
<p id="section-8.2.1-3">One purely illustrative example of some potential triggers for QUIC's
"packet_dropped" event is shown in <a href="#trigger-ex" class="auto internal xref">Figure 31</a>:<a href="#section-8.2.1-3" class="pilcrow">¶</a></p>
<span id="name-trigger-example"></span><div id="trigger-ex">
<figure id="figure-31">
            <div class="alignLeft art-text artwork" id="section-8.2.1-4.1">
<pre>
TransportPacketDropped = {
    ? packet_type: PacketType
    ? raw_length: uint16
    ? trigger: "key_unavailable" /
               "unknown_connection_id" /
               "decrypt_error" /
               "unsupported_version"
}
</pre>
</div>
<figcaption><a href="#figure-31" class="selfRef">Figure 31</a>:
<a href="#name-trigger-example" class="selfRef">Trigger example</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="importance">
<section id="section-8.3">
        <h3 id="name-event-importance-levels">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-event-importance-levels" class="section-name selfRef">Event Importance Levels</a>
        </h3>
<p id="section-8.3-1">Depending on how events are designed, it may be that several events allow the
logging of similar or overlapping data. For example the separate QUIC
<code>connection_started</code> event overlaps with the more generic
<code>connection_state_updated</code>. In these cases, it is not always clear which event
should be logged or used, and which event should take precedence if e.g., both are
present and provide conflicting information.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">To aid in this decision making, qlog defines three event importance levels, in
decreasing order of importance and expected usage:<a href="#section-8.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.3-3.1">
            <p id="section-8.3-3.1.1">Core<a href="#section-8.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.3-3.2">
            <p id="section-8.3-3.2.1">Base<a href="#section-8.3-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.3-3.3">
            <p id="section-8.3-3.3.1">Extra<a href="#section-8.3-3.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-8.3-4">Concrete event types <span class="bcp14">SHOULD</span> define an importance level.<a href="#section-8.3-4" class="pilcrow">¶</a></p>
<p id="section-8.3-5">Core-level events <span class="bcp14">SHOULD</span> be present in all qlog files for a given protocol.
These are typically tied to basic packet and frame parsing and creation, as well
as listing basic internal metrics. Tool implementers <span class="bcp14">SHOULD</span> expect and add
support for these events, though <span class="bcp14">SHOULD NOT</span> expect all Core events to be present
in each qlog trace.<a href="#section-8.3-5" class="pilcrow">¶</a></p>
<p id="section-8.3-6">Base-level events add additional debugging options and <span class="bcp14">MAY</span> be present in qlog
files. Most of these can be implicitly inferred from data in Core events (if
those contain all their properties), but for many it is better to log the events
explicitly as well, making it clearer how the implementation behaves. These
events are for example tied to passing data around in buffers, to how internal
state machines change, and used to help show when decisions are actually made
based on received data. Tool implementers <span class="bcp14">SHOULD</span> at least add support for
showing the contents of these events, if they do not handle them explicitly.<a href="#section-8.3-6" class="pilcrow">¶</a></p>
<p id="section-8.3-7">Extra-level events are considered mostly useful for low-level debugging of the
implementation, rather than the protocol. They allow more fine-grained tracking
of internal behavior. As such, they <span class="bcp14">MAY</span> be present in qlog files and tool
implementers <span class="bcp14">MAY</span> add support for these, but they are not required to.<a href="#section-8.3-7" class="pilcrow">¶</a></p>
<p id="section-8.3-8">Note that in some cases, implementers might not want to log for example data
content details in Core-level events due to performance or privacy considerations.
In this case, they <span class="bcp14">SHOULD</span> use (a subset of) relevant Base-level events instead to
ensure usability of the qlog output. As an example, implementations that do not
log QUIC <code>packet_received</code> events and thus also not which (if any) ACK frames the
packet contains, <span class="bcp14">SHOULD</span> log <code>packets_acked</code> events instead.<a href="#section-8.3-8" class="pilcrow">¶</a></p>
<p id="section-8.3-9">Finally, for event types whose data (partially) overlap with other event types'
definitions, where necessary the event definition document should include explicit
guidance on which to use in specific situations.<a href="#section-8.3-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="tooling-expectations">
<section id="section-8.4">
        <h3 id="name-tooling-expectations">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-tooling-expectations" class="section-name selfRef">Tooling Expectations</a>
        </h3>
<p id="section-8.4-1">qlog is an extensible format and it is expected that new event schema will
emerge that define new categories, event types, event fields (e.g., a field
indicating an event's privacy properties), as well as values for the "trigger"
property within the "data" field, or other member fields of the "data" field, as
they see fit.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4-2">It <span class="bcp14">SHOULD NOT</span> be expected that general-purpose tools will recognize or visualize
all forms of qlog extension. Tools <span class="bcp14">SHOULD</span> allow for the presence of unknown
event fields and make an effort to visualize even unknown data if possible,
otherwise they <span class="bcp14">MUST</span> ignore it.<a href="#section-8.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="further-design-guidance">
<section id="section-8.5">
        <h3 id="name-further-design-guidance">
<a href="#section-8.5" class="section-number selfRef">8.5. </a><a href="#name-further-design-guidance" class="section-name selfRef">Further Design Guidance</a>
        </h3>
<p id="section-8.5-1">There are several ways of defining concrete event types. In practice, two main
types of approach have been observed: a) those that map directly to concepts
seen in the protocols (e.g., <code>packet_sent</code>) and b) those that act as aggregating
events that combine data from several possible protocol behaviors or code paths
into one (e.g., <code>parameters_set</code>). The latter are typically used as a means to
reduce the amount of unique event definitions, as reflecting each possible
protocol event as a separate qlog entity would cause an explosion of event
types.<a href="#section-8.5-1" class="pilcrow">¶</a></p>
<p id="section-8.5-2">Additionally, logging duplicate data is typically prevented as much as possible.
For example, packet header values that remain consistent across many packets are
split into separate events (for example <code>spin_bit_updated</code> or
<code>connection_id_updated</code> for QUIC).<a href="#section-8.5-2" class="pilcrow">¶</a></p>
<p id="section-8.5-3">Finally, when logging additional state change events, those state changes can
often be directly inferred from data on the wire (for example flow control limit
changes). As such, if the implementation is bug-free and spec-compliant, logging
additional events is typically avoided. Exceptions have been made for common
events that benefit from being easily identifiable or individually logged (for
example <code>packets_acked</code>).<a href="#section-8.5-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="generic-event-schema">
<section id="section-9">
      <h2 id="name-the-generic-event-schema">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-the-generic-event-schema" class="section-name selfRef">The Generic Event Schema</a>
      </h2>
<p id="section-9-1">The generic event schema defines categories and event types that are common
across protocols, applications, and use cases. The schema namespace identifier
is "gen".<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="loglevel-events">
<section id="section-9.1">
        <h3 id="name-log-level-events">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-log-level-events" class="section-name selfRef">Log Level Events</a>
        </h3>
<p id="section-9.1-1">In typical logging setups, users utilize a discrete number of well-defined
logging categories, levels or severities to log freeform (string) data. The log
level event category replicates this approach to allow implementations to fully
replace their existing text-based logging by qlog. This is done by providing
events to log generic strings for the typical well-known logging levels (error,
warning, info, debug, verbose). The category identifier is "loglevel". The
category URI is is <code>urn:ietf:params:qlog:events:gen#loglevel</code>.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<span id="name-logleveleventdata-and-proto"></span><div id="loglevel-events-def">
<figure id="figure-32">
          <div class="lang-cddl sourcecode" id="section-9.1-2.1">
<pre>
LogLevelEventData = LogLevelError /
                    LogLevelWarning /
                    LogLevelInfo /
                    LogLevelDebug /
                    LogLevelVerbose

$ProtocolEventData /= LogLevelEventData
</pre>
</div>
<figcaption><a href="#figure-32" class="selfRef">Figure 32</a>:
<a href="#name-logleveleventdata-and-proto" class="selfRef">LogLevelEventData and ProtocolEventData extension</a>
          </figcaption></figure>
</div>
<p id="section-9.1-3">The event types are further defined below, their identifier is the heading name.<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<div id="error">
<section id="section-9.1.1">
          <h4 id="name-error">
<a href="#section-9.1.1" class="section-number selfRef">9.1.1. </a><a href="#name-error" class="section-name selfRef">error</a>
          </h4>
<p id="section-9.1.1-1">Used to log details of an internal error that might not get reflected on the
wire. It has Core importance level; see <a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.1.1-1" class="pilcrow">¶</a></p>
<span id="name-loglevelerror-definition"></span><div id="loglevel-error-def">
<figure id="figure-33">
            <div class="lang-cddl sourcecode" id="section-9.1.1-2.1">
<pre>
LogLevelError = {
    ? code: uint64
    ? message: text

    * $$loglevel-error-extension
}
</pre>
</div>
<figcaption><a href="#figure-33" class="selfRef">Figure 33</a>:
<a href="#name-loglevelerror-definition" class="selfRef">LogLevelError definition</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="warning">
<section id="section-9.1.2">
          <h4 id="name-warning">
<a href="#section-9.1.2" class="section-number selfRef">9.1.2. </a><a href="#name-warning" class="section-name selfRef">warning</a>
          </h4>
<p id="section-9.1.2-1">Used to log details of an internal warning that might not get reflected on the
wire. It has Base importance level; see <a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.1.2-1" class="pilcrow">¶</a></p>
<span id="name-loglevelwarning-definition"></span><div id="loglevel-warning-def">
<figure id="figure-34">
            <div class="lang-cddl sourcecode" id="section-9.1.2-2.1">
<pre>
LogLevelWarning = {
    ? code: uint64
    ? message: text

    * $$loglevel-warning-extension
}
</pre>
</div>
<figcaption><a href="#figure-34" class="selfRef">Figure 34</a>:
<a href="#name-loglevelwarning-definition" class="selfRef">LogLevelWarning definition</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="info">
<section id="section-9.1.3">
          <h4 id="name-info">
<a href="#section-9.1.3" class="section-number selfRef">9.1.3. </a><a href="#name-info" class="section-name selfRef">info</a>
          </h4>
<p id="section-9.1.3-1">Used mainly for implementations that want to use qlog as their one and only
logging format but still want to support unstructured string messages. The event
has Extra importance level; see <a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.1.3-1" class="pilcrow">¶</a></p>
<span id="name-loglevelinfo-definition"></span><div id="loglevel-info-def">
<figure id="figure-35">
            <div class="lang-cddl sourcecode" id="section-9.1.3-2.1">
<pre>
LogLevelInfo = {
    message: text

    * $$loglevel-info-extension
}
</pre>
</div>
<figcaption><a href="#figure-35" class="selfRef">Figure 35</a>:
<a href="#name-loglevelinfo-definition" class="selfRef">LogLevelInfo definition</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="debug">
<section id="section-9.1.4">
          <h4 id="name-debug">
<a href="#section-9.1.4" class="section-number selfRef">9.1.4. </a><a href="#name-debug" class="section-name selfRef">debug</a>
          </h4>
<p id="section-9.1.4-1">Used mainly for implementations that want to use qlog as their one and only
logging format but still want to support unstructured string messages. The event
has Extra importance level; see <a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.1.4-1" class="pilcrow">¶</a></p>
<span id="name-logleveldebug-definition"></span><div id="loglevel-debug-def">
<figure id="figure-36">
            <div class="lang-cddl sourcecode" id="section-9.1.4-2.1">
<pre>
LogLevelDebug = {
    message: text

    * $$loglevel-debug-extension
}
</pre>
</div>
<figcaption><a href="#figure-36" class="selfRef">Figure 36</a>:
<a href="#name-logleveldebug-definition" class="selfRef">LogLevelDebug definition</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="verbose">
<section id="section-9.1.5">
          <h4 id="name-verbose">
<a href="#section-9.1.5" class="section-number selfRef">9.1.5. </a><a href="#name-verbose" class="section-name selfRef">verbose</a>
          </h4>
<p id="section-9.1.5-1">Used mainly for implementations that want to use qlog as their one and only
logging format but still want to support unstructured string messages. The event
has Extra importance level; see <a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.1.5-1" class="pilcrow">¶</a></p>
<span id="name-loglevelverbose-definition"></span><div id="loglevel-verbose-def">
<figure id="figure-37">
            <div class="lang-cddl sourcecode" id="section-9.1.5-2.1">
<pre>
LogLevelVerbose = {
    message: text

    * $$loglevel-verbose-extension
}
</pre>
</div>
<figcaption><a href="#figure-37" class="selfRef">Figure 37</a>:
<a href="#name-loglevelverbose-definition" class="selfRef">LogLevelVerbose definition</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="sim-events">
<section id="section-9.2">
        <h3 id="name-simulation-events">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-simulation-events" class="section-name selfRef">Simulation Events</a>
        </h3>
<p id="section-9.2-1">When evaluating a protocol implementation, one typically sets up a series of
interoperability or benchmarking tests, in which the test situations can change
over time. For example, the network bandwidth or latency can vary during the
test, or the network can be fully disable for a short time. In these setups, it
is useful to know when exactly these conditions are triggered, to allow for
proper correlation with other events. This category defines event types to allow
logging of such simulation metadata and its identifier is "sim". The category
URI is <code>urn:ietf:params:qlog:events:gen#sim</code>.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<span id="name-simulationeventdata-and-pro"></span><div id="sim-events-def">
<figure id="figure-38">
          <div class="lang-cddl sourcecode" id="section-9.2-2.1">
<pre>
SimulationEventData = SimulationScenario /
                SimulationMarker

$ProtocolEventData /= SimulationEventData
</pre>
</div>
<figcaption><a href="#figure-38" class="selfRef">Figure 38</a>:
<a href="#name-simulationeventdata-and-pro" class="selfRef">SimulationEventData and ProtocolEventData extension</a>
          </figcaption></figure>
</div>
<p id="section-9.2-3">The event types are further defined below, their identifier is the heading name.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
<div id="scenario">
<section id="section-9.2.1">
          <h4 id="name-scenario">
<a href="#section-9.2.1" class="section-number selfRef">9.2.1. </a><a href="#name-scenario" class="section-name selfRef">scenario</a>
          </h4>
<p id="section-9.2.1-1">Used to specify which specific scenario is being tested at this particular
instance. This supports, for example, aggregation of several simulations into
one trace (e.g., split by <code>group_id</code>). It has Extra importance level; see
<a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.2.1-1" class="pilcrow">¶</a></p>
<span id="name-simulationscenario-definiti"></span><div id="simulation-scenario-def">
<figure id="figure-39">
            <div class="lang-cddl sourcecode" id="section-9.2.1-2.1">
<pre>
SimulationScenario = {
    ? name: text
    ? details: {* text =&gt; any }

    * $$simulation-scenario-extension
}
</pre>
</div>
<figcaption><a href="#figure-39" class="selfRef">Figure 39</a>:
<a href="#name-simulationscenario-definiti" class="selfRef">SimulationScenario definition</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="marker">
<section id="section-9.2.2">
          <h4 id="name-marker">
<a href="#section-9.2.2" class="section-number selfRef">9.2.2. </a><a href="#name-marker" class="section-name selfRef">marker</a>
          </h4>
<p id="section-9.2.2-1">Used to indicate when specific emulation conditions are triggered at set times
(e.g., at 3 seconds in 2% packet loss is introduced, at 10s a NAT rebind is
triggered). It has Extra importance level; see <a href="#importance" class="auto internal xref">Section 8.3</a>.<a href="#section-9.2.2-1" class="pilcrow">¶</a></p>
<span id="name-simulationmarker-definition"></span><div id="simulation-marker-def">
<figure id="figure-40">
            <div class="lang-cddl sourcecode" id="section-9.2.2-2.1">
<pre>
SimulationMarker = {
    ? type: text
    ? message: text

    * $$simulation-marker-extension
}
</pre>
</div>
<figcaption><a href="#figure-40" class="selfRef">Figure 40</a>:
<a href="#name-simulationmarker-definition" class="selfRef">SimulationMarker definition</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="raw-info">
<section id="section-10">
      <h2 id="name-raw-packet-and-frame-inform">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-raw-packet-and-frame-inform" class="section-name selfRef">Raw packet and frame information</a>
      </h2>
<p id="section-10-1">While qlog is a high-level logging format, it also allows the inclusion of most
raw wire image information, such as byte lengths and byte values. This is useful
when for example investigating or tuning packetization behavior or determining
encoding/framing overheads. However, these fields are not always necessary, can
take up considerable space, and can have a considerable privacy and security
impact (see <a href="#privacy" class="auto internal xref">Section 14</a>). Where applicable, these fields are grouped in a
separate, optional, field named "raw" of type RawInfo. The exact definition of
entities, headers, trailers and payloads depend on the protocol used.<a href="#section-10-1" class="pilcrow">¶</a></p>
<span id="name-rawinfo-definition"></span><div id="raw-info-def">
<figure id="figure-41">
        <div class="lang-cddl sourcecode" id="section-10-2.1">
<pre>
RawInfo = {

    ; the full byte length of the entity (e.g., packet or frame),
    ; including possible headers and trailers
    ? length: uint64

    ; the byte length of the entity's payload,
    ; excluding possible headers or trailers
    ? payload_length: uint64

    ; the (potentially truncated) contents of the full entity,
    ; including headers and possibly trailers
    ? data: hexstring
}
</pre>
</div>
<figcaption><a href="#figure-41" class="selfRef">Figure 41</a>:
<a href="#name-rawinfo-definition" class="selfRef">RawInfo definition</a>
        </figcaption></figure>
</div>
<p id="section-10-3">The RawInfo:data field can be truncated for privacy or security purposes, see
<a href="#truncated-values" class="auto internal xref">Section 11.4</a>. In this case, the length and payload_length fields should
still indicate the non-truncated lengths when used for debugging purposes.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">This document does not specify explicit header_length or trailer_length fields.
In protocols without trailers, header_length can be calculated by subtracting
the payload_length from the length. In protocols with trailers (e.g., QUIC's
AEAD tag), event definition documents <span class="bcp14">SHOULD</span> define how to support header_length
calculation.<a href="#section-10-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="concrete-formats">
<section id="section-11">
      <h2 id="name-serializing-qlog">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-serializing-qlog" class="section-name selfRef">Serializing qlog</a>
      </h2>
<p id="section-11-1">qlog schema definitions in this document are intentionally agnostic to
serialization formats. The choice of format is an implementation decision.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">Other documents related to qlog (for example event definitions for specific
protocols), <span class="bcp14">SHOULD</span> be similarly agnostic to the employed serialization format
and <span class="bcp14">SHOULD</span> clearly indicate this. If not, they <span class="bcp14">MUST</span> include an explanation on
which serialization formats are supported and on how to employ them correctly.<a href="#section-11-2" class="pilcrow">¶</a></p>
<p id="section-11-3">Serialization formats make certain tradeoffs between usability, flexibility,
interoperability, and efficiency. Implementations should take these into
consideration when choosing a format. Some examples of possible formats are
JSON, CBOR, CSV, protocol buffers, flatbuffers, etc. which each have their own
characteristics. For instance, a textual format like JSON can be more flexible
than a binary format but more verbose, typically making it less efficient than a
binary format. A plaintext readable (yet relatively large) format like JSON is
potentially more usable for users operating on the logs directly, while a more
optimized yet restricted format can better suit the constraints of a large scale
operation. A custom or restricted format could be more efficient for analysis
with custom tooling but might not be interoperable with general-purpose qlog
tools.<a href="#section-11-3" class="pilcrow">¶</a></p>
<p id="section-11-4">Considering these tradeoffs, JSON-based serialization formats provide features
that make them a good starting point for qlog flexibility and interoperability.
For these reasons, JSON is a recommended default and expanded considerations are
given to how to map qlog to JSON (<a href="#format-json" class="auto internal xref">Section 11.1</a>, and its streaming counterpart
JSON Text Sequences (<a href="#format-json-seq" class="auto internal xref">Section 11.2</a>. <a href="#json-interop" class="auto internal xref">Section 11.3</a> presents
interoperability considerations for both formats, and <a href="#optimizations" class="auto internal xref">Section 11.5</a> presents
potential optimizations.<a href="#section-11-4" class="pilcrow">¶</a></p>
<p id="section-11-5">Serialization formats require appropriate deserializers/parsers. The
"serialization_format" field (<a href="#abstract-logfile" class="auto internal xref">Section 3</a>) is used to indicate the
chosen serialization format.<a href="#section-11-5" class="pilcrow">¶</a></p>
<div id="format-json">
<section id="section-11.1">
        <h3 id="name-qlog-to-json-mapping">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-qlog-to-json-mapping" class="section-name selfRef">qlog to JSON mapping</a>
        </h3>
<p id="section-11.1-1">As described in <a href="#qlog-file-schema" class="auto internal xref">Section 4</a>, JSON is the default qlog serialization.
When mapping qlog to normal JSON, QlogFile (<a href="#qlog-file-def" class="auto internal xref">Figure 3</a>) is used. The
Media Type is "application/qlog+json" per <span>[<a href="#RFC6839" class="cite xref">RFC6839</a>]</span>. The file
extension/suffix <span class="bcp14">SHOULD</span> be ".qlog".<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<p id="section-11.1-2">In accordance with <span><a href="https://rfc-editor.org/rfc/rfc8259#section-8.1" class="relref">Section 8.1</a> of [<a href="#RFC8259" class="cite xref">RFC8259</a>]</span>, JSON files are required to use
UTF-8 both for the file itself and the string values it contains. In addition,
all qlog field names <span class="bcp14">MUST</span> be lowercase when serialized to JSON.<a href="#section-11.1-2" class="pilcrow">¶</a></p>
<p id="section-11.1-3">In order to serialize CDDL-based qlog event and data structure
definitions to JSON, the official CDDL-to-JSON mapping defined in
<span><a href="https://rfc-editor.org/rfc/rfc8610#appendix-E" class="relref">Appendix E</a> of [<a href="#CDDL" class="cite xref">CDDL</a>]</span> <span class="bcp14">SHOULD</span> be employed.<a href="#section-11.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="format-json-seq">
<section id="section-11.2">
        <h3 id="name-qlog-to-json-text-sequences">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-qlog-to-json-text-sequences" class="section-name selfRef">qlog to JSON Text Sequences mapping</a>
        </h3>
<p id="section-11.2-1">One of the downsides of using normal JSON is that it is inherently a
non-streamable format. A qlog serializer could work around this by opening a
file, writing the required opening data, streaming qlog events by appending
them, and then finalizing the log by appending appropriate closing tags e.g.,
"]}]}". However, failure to append closing tags, could lead to problems because
most JSON parsers will fail if a document is malformed. Some streaming JSON
parsers are able to handle missing closing tags, however they are not widely
deployed in popular environments (e.g., Web browsers)<a href="#section-11.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2-2">To overcome the issues related to JSON streaming, a qlog mapping to a streamable
JSON format called JSON Text Sequences (JSON-SEQ) (<span>[<a href="#RFC7464" class="cite xref">RFC7464</a>]</span>) is provided.<a href="#section-11.2-2" class="pilcrow">¶</a></p>
<p id="section-11.2-3">JSON Text Sequences are very similar to JSON, except that objects are
serialized as individual records, each prefixed by an ASCII Record Separator
(&lt;RS&gt;, 0x1E), and each ending with an ASCII Line Feed character (\n, 0x0A). Note
that each record can also contain any amount of newlines in its body, as long as
it ends with a newline character before the next &lt;RS&gt; character.<a href="#section-11.2-3" class="pilcrow">¶</a></p>
<p id="section-11.2-4">In order to leverage the streaming capability, each qlog event is serialized and
interpreted as an individual JSON Text Sequence record, that is appended as a
new object to the back of an event stream or log file. Put differently, unlike
default JSON, it does not require a document to be wrapped as a full object with
"{ ... }" or "[... ]".<a href="#section-11.2-4" class="pilcrow">¶</a></p>
<p id="section-11.2-5">This alternative record streaming approach cannot be accommodated by QlogFile
(<a href="#qlog-file-def" class="auto internal xref">Figure 3</a>). Instead, QlogFileSeq is defined in <a href="#qlog-file-seq-def" class="auto internal xref">Figure 9</a>,
which notably includes only a single trace (TraceSeq) and omits an explicit
"events" array. An example is provided in <a href="#json-seq-ex" class="auto internal xref">Figure 10</a>. The "group_id" field
can still be used on a per-event basis to include events from conceptually
different sources in a single JSON-SEQ qlog file.<a href="#section-11.2-5" class="pilcrow">¶</a></p>
<p id="section-11.2-6">When mapping qlog to JSON-SEQ, the Media Type is "application/qlog+json-seq" per
<span>[<a href="#RFC8091" class="cite xref">RFC8091</a>]</span>. The file extension/suffix <span class="bcp14">SHOULD</span> be ".sqlog" (for "streaming"
qlog).<a href="#section-11.2-6" class="pilcrow">¶</a></p>
<p id="section-11.2-7">While not specifically required by the JSON-SEQ specification, all qlog field
names <span class="bcp14">MUST</span> be lowercase when serialized to JSON-SEQ.<a href="#section-11.2-7" class="pilcrow">¶</a></p>
<p id="section-11.2-8">In order to serialize all other CDDL-based qlog event and data structure
definitions to JSON-SEQ, the official CDDL-to-JSON mapping defined in
<span><a href="https://rfc-editor.org/rfc/rfc8610#appendix-E" class="relref">Appendix E</a> of [<a href="#CDDL" class="cite xref">CDDL</a>]</span> <span class="bcp14">SHOULD</span> be employed.<a href="#section-11.2-8" class="pilcrow">¶</a></p>
<div id="supporting-json-text-sequences-in-tooling">
<section id="section-11.2.1">
          <h4 id="name-supporting-json-text-sequen">
<a href="#section-11.2.1" class="section-number selfRef">11.2.1. </a><a href="#name-supporting-json-text-sequen" class="section-name selfRef">Supporting JSON Text Sequences in tooling</a>
          </h4>
<p id="section-11.2.1-1">Note that JSON Text Sequences are not supported in most default programming
environments (unlike normal JSON). However, several custom JSON-SEQ parsing
libraries exist in most programming languages that can be used and the format is
easy enough to parse with existing implementations (i.e., by splitting the file
into its component records and feeding them to a normal JSON parser individually,
as each record by itself is a valid JSON object).<a href="#section-11.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="json-interop">
<section id="section-11.3">
        <h3 id="name-json-interoperability">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-json-interoperability" class="section-name selfRef">JSON Interoperability</a>
        </h3>
<p id="section-11.3-1">Some JSON implementations have issues with the full JSON format, especially those
integrated within a JavaScript environment (e.g., Web browsers, NodeJS). I-JSON
(Internet-JSON) is a subset of JSON for such environments; see
<span>[<a href="#I-JSON" class="cite xref">I-JSON</a>]</span>. One of the key limitations of JavaScript, and thus I-JSON,
is that it cannot represent full 64-bit integers in standard operating mode
(i.e., without using BigInt extensions), instead being limited to the range
-(2<sup>53</sup>)+1 to (2<sup>53</sup>)-1.<a href="#section-11.3-1" class="pilcrow">¶</a></p>
<p id="section-11.3-2">To accommodate such constraints in CDDL, <span><a href="https://rfc-editor.org/rfc/rfc8610#appendix-E" class="relref">Appendix E</a> of [<a href="#CDDL" class="cite xref">CDDL</a>]</span> recommends
defining new CDDL types for int64 and uint64 that limit their values to the
restricted 64-bit integer range. However, some of the protocols that qlog is
intended to support (e.g., QUIC, HTTP/3), can use the full range of uint64
values.<a href="#section-11.3-2" class="pilcrow">¶</a></p>
<p id="section-11.3-3">As such, to support situations where I-JSON is in use, seralizers <span class="bcp14">MAY</span> encode
uint64 values using JSON strings. qlog parsers, therefore, <span class="bcp14">SHOULD</span> support
parsing of uint64 values from JSON strings or JSON numbers unless there is out-of-band
information indicating that neither the serializer nor parser are constrained by
I-JSON.<a href="#section-11.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="truncated-values">
<section id="section-11.4">
        <h3 id="name-truncated-values">
<a href="#section-11.4" class="section-number selfRef">11.4. </a><a href="#name-truncated-values" class="section-name selfRef">Truncated values</a>
        </h3>
<p id="section-11.4-1">For some use cases (e.g., limiting file size, privacy), it can be
necessary not to log a full raw blob (using the <code>hexstring</code> type) but
instead a truncated value. For example, one might only store the first 100 bytes of an
HTTP response body to be able to discern which file it actually
contained. In these cases, the original byte-size length cannot be
obtained from the serialized value directly.<a href="#section-11.4-1" class="pilcrow">¶</a></p>
<p id="section-11.4-2">As such, all qlog schema definitions <span class="bcp14">SHOULD</span> include a separate,
length-indicating field for all fields of type <code>hexstring</code> they specify,
see for example <a href="#raw-info" class="auto internal xref">Section 10</a>. This not only ensures the original length
can always be retrieved, but also allows the omission of any raw value
bytes of the field completely (e.g., out of privacy or security
considerations).<a href="#section-11.4-2" class="pilcrow">¶</a></p>
<p id="section-11.4-3">To reduce overhead however and in the case the full raw value is logged,
the extra length-indicating field can be left out. As such, tools <span class="bcp14">MUST</span>
be able to deal with this situation and derive the length of the field
from the raw value if no separate length-indicating field is present.
The main possible permutations are shown by example in
<a href="#truncated-values-ex" class="auto internal xref">Figure 42</a>.<a href="#section-11.4-3" class="pilcrow">¶</a></p>
<span id="name-example-for-serializing-tru"></span><div id="truncated-values-ex">
<figure id="figure-42">
          <div class="alignLeft art-text artwork" id="section-11.4-4.1">
<pre>
// both the content's value and its length are present
// (length is redundant)
{
    "content_length": 5,
    "content": "051428abff"
}

// only the content value is present, indicating it
// represents the content's full value. The byte
// length is obtained by calculating content.length / 2
{
    "content": "051428abff"
}

// only the length is present, meaning the value
// was omitted
{
    "content_length": 5,
}

// both value and length are present, but the lengths
// do not match: the value was truncated to
// the first three bytes.
{
    "content_length": 5,
    "content": "051428"
}
</pre>
</div>
<figcaption><a href="#figure-42" class="selfRef">Figure 42</a>:
<a href="#name-example-for-serializing-tru" class="selfRef">Example for serializing truncated hexstrings</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="optimizations">
<section id="section-11.5">
        <h3 id="name-optimization-of-serialized-">
<a href="#section-11.5" class="section-number selfRef">11.5. </a><a href="#name-optimization-of-serialized-" class="section-name selfRef">Optimization of serialized data</a>
        </h3>
<p id="section-11.5-1">Both the JSON and JSON-SEQ formatting options described above are serviceable in
general small to medium scale (debugging) setups. However, these approaches tend
to be relatively verbose, leading to larger file sizes. Additionally, generalized
JSON(-SEQ) (de)serialization performance is typically (slightly) lower than that
of more optimized and predictable formats. Both aspects present challenges to
large scale setups, though they may still be practical to deploy; see <span>[<a href="#ANRW-2020" class="cite xref">ANRW-2020</a>]</span>.
JSON and JSON-SEQ compress very well using commonly-available algorithms such as
GZIP or Brotli.<a href="#section-11.5-1" class="pilcrow">¶</a></p>
<p id="section-11.5-2">During the development of qlog, a multitude of alternative formatting
and optimization options were assessed and the results are <a href="https://github.com/quiclog/internet-drafts/issues/30#issuecomment-617675097">summarized on the qlog
github
repository</a>.<a href="#section-11.5-2" class="pilcrow">¶</a></p>
<p id="section-11.5-3">Formal definition of additional qlog formats or encodings that use the
optimization techniques described here, or any other optimization technique is
left to future activity that can apply the following guidelines.<a href="#section-11.5-3" class="pilcrow">¶</a></p>
<p id="section-11.5-4">In order to help tools correctly parse and process serialized qlog, it is
<span class="bcp14">RECOMMENDED</span> that new formats also define suitable file extensions and media
types. This provides a clear signal and avoids the need to provide out-of-band
information or to rely on heuristic fallbacks; see <a href="#tooling" class="auto internal xref">Section 13</a>.<a href="#section-11.5-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="methods-of-access-and-generation">
<section id="section-12">
      <h2 id="name-methods-of-access-and-gener">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-methods-of-access-and-gener" class="section-name selfRef">Methods of access and generation</a>
      </h2>
<p id="section-12-1">Different implementations will have different ways of generating and storing
qlogs. However, there is still value in defining a few default ways in which to
steer this generation and access of the results.<a href="#section-12-1" class="pilcrow">¶</a></p>
<div id="set-file-output-destination-via-an-environment-variable">
<section id="section-12.1">
        <h3 id="name-set-file-output-destination">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-set-file-output-destination" class="section-name selfRef">Set file output destination via an environment variable</a>
        </h3>
<p id="section-12.1-1">To provide users control over where and how qlog files are created, two
environment variables are defined. The first, QLOGFILE, indicates a full path to where an
individual qlog file should be stored. This path <span class="bcp14">MUST</span> include the full file
extension. The second, QLOGDIR, sets a general directory path in which qlog files
should be placed. This path <span class="bcp14">MUST</span> include the directory separator character at the
end.<a href="#section-12.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1-2">In general, QLOGDIR should be preferred over QLOGFILE if an endpoint is prone to
generate multiple qlog files. This can for example be the case for a QUIC server
implementation that logs each QUIC connection in a separate qlog file. An
alternative that uses QLOGFILE would be a QUIC server that logs all connections in
a single file and uses the "group_id" field (<a href="#group-ids" class="auto internal xref">Section 7.4</a>) to allow post-hoc
separation of events.<a href="#section-12.1-2" class="pilcrow">¶</a></p>
<p id="section-12.1-3">Implementations <span class="bcp14">SHOULD</span> provide support for QLOGDIR and <span class="bcp14">MAY</span> provide support for
QLOGFILE.<a href="#section-12.1-3" class="pilcrow">¶</a></p>
<p id="section-12.1-4">When using QLOGDIR, it is up to the implementation to choose an appropriate naming
scheme for the qlog files themselves. The chosen scheme will typically depend on
the context or protocols used. For example, for QUIC, it is recommended to use the
Original Destination Connection ID (ODCID), followed by the vantage point type of
the logging endpoint. Examples of all options for QUIC are shown in
<a href="#qlogdir-example" class="auto internal xref">Figure 43</a>.<a href="#section-12.1-4" class="pilcrow">¶</a></p>
<span id="name-environment-variable-exampl"></span><div id="qlogdir-example">
<figure id="figure-43">
          <div class="alignLeft art-text artwork" id="section-12.1-5.1">
<pre>
Command: QLOGFILE=/srv/qlogs/client.qlog quicclientbinary

Should result in the the quicclientbinary executable logging a
single qlog file named client.qlog in the /srv/qlogs directory.
This is for example useful in tests when the client sets up
just a single connection and then exits.

Command: QLOGDIR=/srv/qlogs/ quicserverbinary

Should result in the quicserverbinary executable generating
several logs files, one for each QUIC connection.
Given two QUIC connections, with ODCID values "abcde" and
"12345" respectively, this would result in two files:
/srv/qlogs/abcde_server.qlog
/srv/qlogs/12345_server.qlog

Command: QLOGFILE=/srv/qlogs/server.qlog quicserverbinary

Should result in the the quicserverbinary executable logging
a single qlog file named server.qlog in the /srv/qlogs directory.
Given that the server handled two QUIC connections before it was
shut down, with ODCID values "abcde" and "12345" respectively,
this would result in event instances in the qlog file being
tagged with the "group_id" field with values "abcde" and "12345".
</pre>
</div>
<figcaption><a href="#figure-43" class="selfRef">Figure 43</a>:
<a href="#name-environment-variable-exampl" class="selfRef">Environment variable examples for a QUIC implementation</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="tooling">
<section id="section-13">
      <h2 id="name-tooling-requirements">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-tooling-requirements" class="section-name selfRef">Tooling requirements</a>
      </h2>
<p id="section-13-1">Tools ingestion qlog <span class="bcp14">MUST</span> indicate which qlog version(s), qlog format(s),
compression methods and potentially other input file formats (for example .pcap)
they support. Tools <span class="bcp14">SHOULD</span> at least support .qlog files in the default JSON format
(<a href="#format-json" class="auto internal xref">Section 11.1</a>). Additionally, they <span class="bcp14">SHOULD</span> indicate exactly which values for and
properties of the name (category and type) and data fields they look for to
execute their logic. Tools <span class="bcp14">SHOULD</span> perform a (high-level) check if an input qlog
file adheres to the expected qlog schema. If a tool determines a qlog file does
not contain enough supported information to correctly execute the tool's logic, it
<span class="bcp14">SHOULD</span> generate a clear error message to this effect.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">Tools <span class="bcp14">MUST NOT</span> produce breaking errors for any field names and/or values in the
qlog format that they do not recognize. Tools <span class="bcp14">SHOULD</span> indicate even unknown event
occurrences within their context (e.g., marking unknown events on a timeline for
manual interpretation by the user).<a href="#section-13-2" class="pilcrow">¶</a></p>
<p id="section-13-3">Tool authors should be aware that, depending on the logging implementation, some
events will not always be present in all traces. For example, using a circular
logging buffer of a fixed size, it could be that the earliest events (e.g.,
connection setup events) are later overwritten by "newer" events. Alternatively,
some events can be intentionally omitted out of privacy or file size
considerations. Tool authors are encouraged to make their tools robust enough to
still provide adequate output for incomplete logs.<a href="#section-13-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy">
<section id="section-14">
      <h2 id="name-security-and-privacy-consid">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-security-and-privacy-consid" class="section-name selfRef">Security and privacy considerations</a>
      </h2>
<p id="section-14-1">Protocols such as TLS <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span> and QUIC <span>[<a href="#RFC9000" class="cite xref">RFC9000</a>]</span> offer secure protection
for the wire image <span>[<a href="#RFC8546" class="cite xref">RFC8546</a>]</span>. Logging can reveal aspects of the wire image
that would ordinarily be protected, creating tension between observability,
security and privacy, especially if data can be correlated across data sources.<a href="#section-14-1" class="pilcrow">¶</a></p>
<p id="section-14-2">qlog permits logging of a broad and detailed range of data. Operators and
implementers are responsible for deciding what data is logged to address their
requirements and constraints. As per <span>[<a href="#RFC6973" class="cite xref">RFC6973</a>]</span>, operators must be aware that
data could be compromised, risking the privacy of all participants. Where
entities expect protocol features to ensure data privacy, logging might
unknowingly be subject to broader privacy risks, undermining their ability to
assess or respond effectively.<a href="#section-14-2" class="pilcrow">¶</a></p>
<div id="data-at-risk">
<section id="section-14.1">
        <h3 id="name-data-at-risk">
<a href="#section-14.1" class="section-number selfRef">14.1. </a><a href="#name-data-at-risk" class="section-name selfRef">Data at risk</a>
        </h3>
<p id="section-14.1-1">qlog operators and implementers need to consider security and privacy risks when
handling qlog data, including logging, storage, usage, and more. The
considerations presented in this section may pose varying risks depending on the
the data itself or its handling.<a href="#section-14.1-1" class="pilcrow">¶</a></p>
<p id="section-14.1-2">The following is a non-exhaustive list of example data types that could contain
sensitive information that might allow identification or correlation of
individual connections, endpoints, users or sessions across qlog or other data
sources (e.g., captures of encrypted packets):<a href="#section-14.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-14.1-3.1">
            <p id="section-14.1-3.1.1">IP addresses and transport protocol port numbers.<a href="#section-14.1-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.2">
            <p id="section-14.1-3.2.1">Session, Connection, or User identifiers e.g., QUIC Connection IDs <span><a href="https://rfc-editor.org/rfc/rfc9000#section-9.5" class="relref">Section 9.5</a> of [<a href="#RFC9000" class="cite xref">RFC9000</a>]</span>).<a href="#section-14.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.3">
            <p id="section-14.1-3.3.1">System-level information e.g., CPU, process, or thread identifiers.<a href="#section-14.1-3.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.4">
            <p id="section-14.1-3.4.1">Stored State e.g., QUIC address validation and retry tokens, TLS session
tickets, and HTTP cookies.<a href="#section-14.1-3.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.5">
            <p id="section-14.1-3.5.1">TLS decryption keys, passwords, and HTTP-level API access or authorization tokens.<a href="#section-14.1-3.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.6">
            <p id="section-14.1-3.6.1">High-resolution event timestamps or inter-event timings, event counts, packet
sizes, and frame sizes.<a href="#section-14.1-3.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.7">
            <p id="section-14.1-3.7.1">Full or partial raw packet and frame payloads that are encrypted.<a href="#section-14.1-3.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-14.1-3.8">
            <p id="section-14.1-3.8.1">Full or partial raw packet and frame payloads that are plaintext e.g., HTTP Field
values, HTTP response data, or TLS SNI field values.<a href="#section-14.1-3.8.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="operational-implications-and-recommendations">
<section id="section-14.2">
        <h3 id="name-operational-implications-an">
<a href="#section-14.2" class="section-number selfRef">14.2. </a><a href="#name-operational-implications-an" class="section-name selfRef">Operational implications and recommendations</a>
        </h3>
<p id="section-14.2-1">Operational considerations should focus on authorizing capture and access to logs. Logging of
Internet protocols using qlog can be equivalent to the ability to store or read plaintext
communications. Without a more detailed analysis, all of the security considerations of plaintext access apply.<a href="#section-14.2-1" class="pilcrow">¶</a></p>
<p id="section-14.2-2">It is recommended that qlog capture is subject to access control and auditing.
These controls should support granular levels of information capture based on
role and permissions (e.g., capture of more-sensitive data requires higher
privileges).<a href="#section-14.2-2" class="pilcrow">¶</a></p>
<p id="section-14.2-3">It is recommended that access to stored qlogs is subject to access control and
auditing.<a href="#section-14.2-3" class="pilcrow">¶</a></p>
<p id="section-14.2-4">End users might not understand the implications of qlog to security or privacy,
and their environments might limit access control techniques. Implementations should
make enabling qlog conspicuous (e.g., requiring clear and explicit actions to
start a capture) and resistant to social engineering, automation, or drive-by
attacks; for example, isolation or sandboxing of capture from other activities
in the same process or component.<a href="#section-14.2-4" class="pilcrow">¶</a></p>
<p id="section-14.2-5">It is recommended that data retention policies are defined for the storage of
qlog files.<a href="#section-14.2-5" class="pilcrow">¶</a></p>
<p id="section-14.2-6">It is recommended that qlog files are encrypted in transit and at rest.<a href="#section-14.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data-minimization-or-anonymization">
<section id="section-14.3">
        <h3 id="name-data-minimization-or-anonym">
<a href="#section-14.3" class="section-number selfRef">14.3. </a><a href="#name-data-minimization-or-anonym" class="section-name selfRef">Data minimization or anonymization</a>
        </h3>
<p id="section-14.3-1">Applying data minimization or anonymization techniques to qlog might help
address some security and privacy risks. However, removing or anonymizing data
without sufficient care might not enhance privacy or security and
could diminish the utility of qlog data.<a href="#section-14.3-1" class="pilcrow">¶</a></p>
<p id="section-14.3-2">Operators and implementers should balance the value of logged data with the
potential risks of voluntary or involuntary disclosure to trusted or untrusted
entities. Importantly, both the breadth and depth of the data needed to make it
 useful, as well as the definition of entities depend greatly on the intended
use cases. For example, a research project might be tightly scoped, time bound,
and require participants to explicitly opt in to having their data collected
with the intention for this to be shared in a publication. Conversely, a server
administrator might desire to collect telemetry, from users whom they have no
relationship with, for continuing operational needs.<a href="#section-14.3-2" class="pilcrow">¶</a></p>
<p id="section-14.3-3">The most extreme form of minimization or anonymization is deleting a field,
equivalent to not logging it. qlog implementations should offer fine-grained
control for this on a per-use-case or per-connection basis.<a href="#section-14.3-3" class="pilcrow">¶</a></p>
<p id="section-14.3-4">Data can undergo anonymization, pseudonymization, permutation, truncation,
re-encryption, or aggregation; see <span><a href="https://rfc-editor.org/rfc/rfc8932#appendix-B" class="relref">Appendix B</a> of [<a href="#DNS-PRIVACY" class="cite xref">DNS-PRIVACY</a>]</span> for
techniques, especially regarding IP addresses. However, operators should be
cautious because many anonymization methods have been shown to be insufficient to safeguard
user privacy or identity, particularly with large or easily correlated data sets.<a href="#section-14.3-4" class="pilcrow">¶</a></p>
<p id="section-14.3-5">Operators should consider end user rights and preferences. Active user participation (as
indicated by <span>[<a href="#RFC6973" class="cite xref">RFC6973</a>]</span>) on a per-qlog basis is challenging but aligning qlog
capture, storage, and removal with existing user preference and privacy controls
is crucial. Operators should consider agressive approaches to deletion or
aggregation.<a href="#section-14.3-5" class="pilcrow">¶</a></p>
<p id="section-14.3-6">The most sensitive data in qlog is typically contained in RawInfo type fields
(see <a href="#raw-info" class="auto internal xref">Section 10</a>). Therefore, qlog users should exercise caution and limit the
inclusion of such fields for all but the most stringent use cases.<a href="#section-14.3-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="iana">
<section id="section-15">
      <h2 id="name-iana-considerations">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-15-1">IANA is requested to register a new entry in the "IETF URN Sub-namespace for
Registered Protocol Parameter Identifiers" registry (<span>[<a href="#RFC3553" class="cite xref">RFC3553</a>]</span>)":<a href="#section-15-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-15-2">
        <dt id="section-15-2.1">Registered Parameter Identifier:</dt>
        <dd style="margin-left: 1.5em" id="section-15-2.2">
          <p id="section-15-2.2.1">qlog<a href="#section-15-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-15-2.3">Reference:</dt>
        <dd style="margin-left: 1.5em" id="section-15-2.4">
          <p id="section-15-2.4.1">This Document<a href="#section-15-2.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-15-2.5">IANA Registry Reference:</dt>
        <dd style="margin-left: 1.5em" id="section-15-2.6">
          <p id="section-15-2.6.1"><span>&lt;<a href="https://www.iana.org/assignments/qlog">https://www.iana.org/assignments/qlog</a>&gt;</span><a href="#section-15-2.6.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-15-3">IANA is requested to create the "qlog log file schema URIs" registry
at <span><a href="https://www.iana.org/assignments/qlog">https://www.iana.org/assignments/qlog</a></span> for the purpose of registering
log file schema. It has the following format:<a href="#section-15-3" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
        <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Log File Schema URI</th>
            <th class="text-left" rowspan="1" colspan="1">Description</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:qlog:file:contained</td>
            <td class="text-left" rowspan="1" colspan="1">Concrete log file schema that can contain several traces from multiple vantage points.</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#qlog-file-schema" class="auto internal xref">Section 4</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:qlog:file:sequential</td>
            <td class="text-left" rowspan="1" colspan="1">Concrete log file schema containing a single trace, optimized for seqential read and write access.</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#qlog-file-seq-schema" class="auto internal xref">Section 5</a>
</td>
          </tr>
        </tbody>
      </table>
<p id="section-15-5">IANA is requested to create the "qlog event category URIs" registry
at <span><a href="https://www.iana.org/assignments/qlog">https://www.iana.org/assignments/qlog</a></span> for the purpose of registering
event categories. It has the following format:<a href="#section-15-5" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
        <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Event Category URI</th>
            <th class="text-left" rowspan="1" colspan="1">Description</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:qlog:events:gen#loglevel</td>
            <td class="text-left" rowspan="1" colspan="1">Well-known logging levels for free-form text.</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#loglevel-events" class="auto internal xref">Section 9.1</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:qlog:events:gen#sim</td>
            <td class="text-left" rowspan="1" colspan="1">Events for simulation testing.</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#sim-events" class="auto internal xref">Section 9.2</a>
</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="sec-combined-references">
<section id="section-16">
      <h2 id="name-references">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-16.1">
        <h3 id="name-normative-references">
<a href="#section-16.1" class="section-number selfRef">16.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="CDDL">[CDDL]</dt>
        <dd>
<span class="refAuthor">Birkholz, H.</span>, <span class="refAuthor">Vigano, C.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures"</span>, <span class="seriesInfo">RFC 8610</span>, <span class="seriesInfo">DOI 10.17487/RFC8610</span>, <time datetime="2019-06" class="refDate">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8610">https://www.rfc-editor.org/rfc/rfc8610</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="DNS-PRIVACY">[DNS-PRIVACY]</dt>
        <dd>
<span class="refAuthor">Dickinson, S.</span>, <span class="refAuthor">Overeinder, B.</span>, <span class="refAuthor">van Rijswijk-Deij, R.</span>, and <span class="refAuthor">A. Mankin</span>, <span class="refTitle">"Recommendations for DNS Privacy Service Operators"</span>, <span class="seriesInfo">BCP 232</span>, <span class="seriesInfo">RFC 8932</span>, <span class="seriesInfo">DOI 10.17487/RFC8932</span>, <time datetime="2020-10" class="refDate">October 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8932">https://www.rfc-editor.org/rfc/rfc8932</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-JSON">[I-JSON]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The I-JSON Message Format"</span>, <span class="seriesInfo">RFC 7493</span>, <span class="seriesInfo">DOI 10.17487/RFC7493</span>, <time datetime="2015-03" class="refDate">March 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7493">https://www.rfc-editor.org/rfc/rfc7493</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="JSON">[JSON]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="JSON-Text-Sequences">[JSON-Text-Sequences]</dt>
        <dd>
<span class="refAuthor">Williams, N.</span>, <span class="refTitle">"JavaScript Object Notation (JSON) Text Sequences"</span>, <span class="seriesInfo">RFC 7464</span>, <span class="seriesInfo">DOI 10.17487/RFC7464</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7464">https://www.rfc-editor.org/rfc/rfc7464</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2046">[RFC2046]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span> and <span class="refAuthor">N. Borenstein</span>, <span class="refTitle">"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"</span>, <span class="seriesInfo">RFC 2046</span>, <span class="seriesInfo">DOI 10.17487/RFC2046</span>, <time datetime="1996-11" class="refDate">November 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2046">https://www.rfc-editor.org/rfc/rfc2046</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
        <dd>
<span class="refAuthor">Klyne, G.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time datetime="2002-07" class="refDate">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3339">https://www.rfc-editor.org/rfc/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3553">[RFC3553]</dt>
        <dd>
<span class="refAuthor">Mealling, M.</span>, <span class="refAuthor">Masinter, L.</span>, <span class="refAuthor">Hardie, T.</span>, and <span class="refAuthor">G. Klyne</span>, <span class="refTitle">"An IETF URN Sub-namespace for Registered Protocol Parameters"</span>, <span class="seriesInfo">BCP 73</span>, <span class="seriesInfo">RFC 3553</span>, <span class="seriesInfo">DOI 10.17487/RFC3553</span>, <time datetime="2003-06" class="refDate">June 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3553">https://www.rfc-editor.org/rfc/rfc3553</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6839">[RFC6839]</dt>
        <dd>
<span class="refAuthor">Hansen, T.</span> and <span class="refAuthor">A. Melnikov</span>, <span class="refTitle">"Additional Media Type Structured Syntax Suffixes"</span>, <span class="seriesInfo">RFC 6839</span>, <span class="seriesInfo">DOI 10.17487/RFC6839</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6839">https://www.rfc-editor.org/rfc/rfc6839</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6973">[RFC6973]</dt>
        <dd>
<span class="refAuthor">Cooper, A.</span>, <span class="refAuthor">Tschofenig, H.</span>, <span class="refAuthor">Aboba, B.</span>, <span class="refAuthor">Peterson, J.</span>, <span class="refAuthor">Morris, J.</span>, <span class="refAuthor">Hansen, M.</span>, and <span class="refAuthor">R. Smith</span>, <span class="refTitle">"Privacy Considerations for Internet Protocols"</span>, <span class="seriesInfo">RFC 6973</span>, <span class="seriesInfo">DOI 10.17487/RFC6973</span>, <time datetime="2013-07" class="refDate">July 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6973">https://www.rfc-editor.org/rfc/rfc6973</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7464">[RFC7464]</dt>
        <dd>
<span class="refAuthor">Williams, N.</span>, <span class="refTitle">"JavaScript Object Notation (JSON) Text Sequences"</span>, <span class="seriesInfo">RFC 7464</span>, <span class="seriesInfo">DOI 10.17487/RFC7464</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7464">https://www.rfc-editor.org/rfc/rfc7464</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8091">[RFC8091]</dt>
        <dd>
<span class="refAuthor">Wilde, E.</span>, <span class="refTitle">"A Media Type Structured Syntax Suffix for JSON Text Sequences"</span>, <span class="seriesInfo">RFC 8091</span>, <span class="seriesInfo">DOI 10.17487/RFC8091</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8091">https://www.rfc-editor.org/rfc/rfc8091</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06" class="refDate">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8126">https://www.rfc-editor.org/rfc/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9000">[RFC9000]</dt>
      <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9000">https://www.rfc-editor.org/rfc/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-16.2">
        <h3 id="name-informative-references">
<a href="#section-16.2" class="section-number selfRef">16.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="ANRW-2020">[ANRW-2020]</dt>
        <dd>
<span class="refAuthor">Marx, R.</span>, <span class="refAuthor">Piraux, M.</span>, <span class="refAuthor">Quax, P.</span>, and <span class="refAuthor">W. Lamotte</span>, <span class="refTitle">"Debugging QUIC and HTTP/3 with qlog and qvis"</span>, <time datetime="2020-09" class="refDate">September 2020</time>, <span>&lt;<a href="https://qlog.edm.uhasselt.be/anrw/">https://qlog.edm.uhasselt.be/anrw/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QLOG-H3">[QLOG-H3]</dt>
        <dd>
<span class="refAuthor">Marx, R.</span>, <span class="refAuthor">Niccolini, L.</span>, <span class="refAuthor">Seemann, M.</span>, and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"HTTP/3 qlog event definitions"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-qlog-h3-events-08</span>, <time datetime="2024-07-08" class="refDate">8 July 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-qlog-h3-events-08">https://datatracker.ietf.org/doc/html/draft-ietf-quic-qlog-h3-events-08</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QLOG-QUIC">[QLOG-QUIC]</dt>
        <dd>
<span class="refAuthor">Marx, R.</span>, <span class="refAuthor">Niccolini, L.</span>, <span class="refAuthor">Seemann, M.</span>, and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"QUIC event definitions for qlog"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-qlog-quic-events-08</span>, <time datetime="2024-07-08" class="refDate">8 July 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-qlog-quic-events-08">https://datatracker.ietf.org/doc/html/draft-ietf-quic-qlog-quic-events-08</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8546">[RFC8546]</dt>
      <dd>
<span class="refAuthor">Trammell, B.</span> and <span class="refAuthor">M. Kuehlewind</span>, <span class="refTitle">"The Wire Image of a Network Protocol"</span>, <span class="seriesInfo">RFC 8546</span>, <span class="seriesInfo">DOI 10.17487/RFC8546</span>, <time datetime="2019-04" class="refDate">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8546">https://www.rfc-editor.org/rfc/rfc8546</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">Much of the initial work by Robin Marx was done at the Hasselt and KU Leuven
Universities.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">Thanks to Jana Iyengar, Brian Trammell, Dmitri Tikhonov, Stephen Petrides, Jari
Arkko, Marcus Ihlar, Victor Vasiliev, Mirja Kühlewind, Jeremy Lainé, Kazu
Yamamoto, Christian Huitema, Hugo Landau and Jonathan Lennox for their feedback
and suggestions.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="change-log">
<section id="appendix-B">
      <h2 id="name-change-log">
<a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<p id="appendix-B-1">This section is to be removed before publishing as an RFC.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<div id="since-draft-ietf-quic-qlog-main-schema-07">
<section id="appendix-B.1">
        <h3 id="name-since-draft-ietf-quic-qlog-">
<a href="#name-since-draft-ietf-quic-qlog-" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-07:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.1-1.1">
            <p id="appendix-B.1-1.1.1">Added path and PathID (#336)<a href="#appendix-B.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.2">
            <p id="appendix-B.1-1.2.1">Removed custom definition of uint64 type (#360, #388)<a href="#appendix-B.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.3">
            <p id="appendix-B.1-1.3.1">ProtocolEventBody is now called ProtocolEventData (#352)<a href="#appendix-B.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.4">
            <p id="appendix-B.1-1.4.1">Editorial changes (#364, #289, #353, #361, #362)<a href="#appendix-B.1-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-06">
<section id="appendix-B.2">
        <h3 id="name-since-draft-ietf-quic-qlog-m">
<a href="#name-since-draft-ietf-quic-qlog-m" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-06:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.1">
            <p id="appendix-B.2-1.1.1">Editorial reworking of the document (#331, #332)<a href="#appendix-B.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.2">
            <p id="appendix-B.2-1.2.1">Updated IANA considerations section (#333)<a href="#appendix-B.2-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-05">
<section id="appendix-B.3">
        <h3 id="name-since-draft-ietf-quic-qlog-ma">
<a href="#name-since-draft-ietf-quic-qlog-ma" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-05:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.3-1.1">
            <p id="appendix-B.3-1.1.1">Updated qlog_version to 0.4 (due to breaking changes) (#314)<a href="#appendix-B.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.2">
            <p id="appendix-B.3-1.2.1">Renamed 'transport' category to 'quic' (#302)<a href="#appendix-B.3-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.3">
            <p id="appendix-B.3-1.3.1">Added 'system_info' field (#305)<a href="#appendix-B.3-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.4">
            <p id="appendix-B.3-1.4.1">Removed 'summary' and 'configuration' fields (#308)<a href="#appendix-B.3-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.5">
            <p id="appendix-B.3-1.5.1">Editorial and formatting changes (#298, #303, #304, #316, #320, #321, #322, #326, #328)<a href="#appendix-B.3-1.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-04">
<section id="appendix-B.4">
        <h3 id="name-since-draft-ietf-quic-qlog-mai">
<a href="#name-since-draft-ietf-quic-qlog-mai" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-04:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.4-1.1">
            <p id="appendix-B.4-1.1.1">Updated RawInfo definition and guidance (#243)<a href="#appendix-B.4-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-03">
<section id="appendix-B.5">
        <h3 id="name-since-draft-ietf-quic-qlog-main">
<a href="#name-since-draft-ietf-quic-qlog-main" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-03:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.5-1.1">
            <p id="appendix-B.5-1.1.1">Added security and privacy considerations discussion (#252)<a href="#appendix-B.5-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-02">
<section id="appendix-B.6">
        <h3 id="name-since-draft-ietf-quic-qlog-main-">
<a href="#name-since-draft-ietf-quic-qlog-main-" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-02:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.6-1.1">
            <p id="appendix-B.6-1.1.1">No changes - new draft to prevent expiration<a href="#appendix-B.6-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-01">
<section id="appendix-B.7">
        <h3 id="name-since-draft-ietf-quic-qlog-main-s">
<a href="#name-since-draft-ietf-quic-qlog-main-s" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-01:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.7-1.1">
            <p id="appendix-B.7-1.1.1">Change the data definition language from TypeScript to CDDL (#143)<a href="#appendix-B.7-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-quic-qlog-main-schema-00">
<section id="appendix-B.8">
        <h3 id="name-since-draft-ietf-quic-qlog-main-sc">
<a href="#name-since-draft-ietf-quic-qlog-main-sc" class="section-name selfRef">Since draft-ietf-quic-qlog-main-schema-00:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.8-1.1">
            <p id="appendix-B.8-1.1.1">Changed the streaming serialization format from NDJSON to JSON Text Sequences
(#172)<a href="#appendix-B.8-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.8-1.2">
            <p id="appendix-B.8-1.2.1">Added Media Type definitions for various qlog formats (#158)<a href="#appendix-B.8-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.8-1.3">
            <p id="appendix-B.8-1.3.1">Changed to semantic versioning<a href="#appendix-B.8-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-marx-qlog-main-schema-draft-02">
<section id="appendix-B.9">
        <h3 id="name-since-draft-marx-qlog-main-">
<a href="#name-since-draft-marx-qlog-main-" class="section-name selfRef">Since draft-marx-qlog-main-schema-draft-02:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.9-1.1">
            <p id="appendix-B.9-1.1.1">These changes were done in preparation of the adoption of the drafts by the QUIC
working group (#137)<a href="#appendix-B.9-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.2">
            <p id="appendix-B.9-1.2.1">Moved RawInfo, Importance, Generic events and Simulation events to this document.<a href="#appendix-B.9-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.3">
            <p id="appendix-B.9-1.3.1">Added basic event definition guidelines<a href="#appendix-B.9-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.4">
            <p id="appendix-B.9-1.4.1">Made protocol_type an array instead of a string (#146)<a href="#appendix-B.9-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-marx-qlog-main-schema-01">
<section id="appendix-B.10">
        <h3 id="name-since-draft-marx-qlog-main-s">
<a href="#name-since-draft-marx-qlog-main-s" class="section-name selfRef">Since draft-marx-qlog-main-schema-01:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.10-1.1">
            <p id="appendix-B.10-1.1.1">Decoupled qlog from the JSON format and described a mapping instead (#89)<a href="#appendix-B.10-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.10-1.1.2.1">
                <p id="appendix-B.10-1.1.2.1.1">Data types are now specified in this document and proper definitions for
fields were added in this format<a href="#appendix-B.10-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.10-1.1.2.2">
                <p id="appendix-B.10-1.1.2.2.1">64-bit numbers can now be either strings or numbers, with a preference for
numbers (#10)<a href="#appendix-B.10-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.10-1.1.2.3">
                <p id="appendix-B.10-1.1.2.3.1">binary blobs are now logged as lowercase hex strings (#39, #36)<a href="#appendix-B.10-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.10-1.1.2.4">
                <p id="appendix-B.10-1.1.2.4.1">added guidance to add length-specifiers for binary blobs (#102)<a href="#appendix-B.10-1.1.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-B.10-1.2">
            <p id="appendix-B.10-1.2.1">Removed "time_units" from Configuration. All times are now in ms instead (#95)<a href="#appendix-B.10-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.10-1.3">
            <p id="appendix-B.10-1.3.1">Removed the "event_fields" setup for a more straightforward JSON format
(#101,#89)<a href="#appendix-B.10-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.10-1.4">
            <p id="appendix-B.10-1.4.1">Added a streaming option using the NDJSON format (#109,#2,#106)<a href="#appendix-B.10-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.10-1.5">
            <p id="appendix-B.10-1.5.1">Described optional optimization options for implementers (#30)<a href="#appendix-B.10-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.10-1.6">
            <p id="appendix-B.10-1.6.1">Added QLOGDIR and QLOGFILE environment variables, clarified the .well-known URL
usage (#26,#33,#51)<a href="#appendix-B.10-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.10-1.7">
            <p id="appendix-B.10-1.7.1">Overall tightened up the text and added more examples<a href="#appendix-B.10-1.7.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-marx-qlog-main-schema-00">
<section id="appendix-B.11">
        <h3 id="name-since-draft-marx-qlog-main-sc">
<a href="#name-since-draft-marx-qlog-main-sc" class="section-name selfRef">Since draft-marx-qlog-main-schema-00:</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.11-1.1">
            <p id="appendix-B.11-1.1.1">All field names are now lowercase (e.g., category instead of CATEGORY)<a href="#appendix-B.11-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.11-1.2">
            <p id="appendix-B.11-1.2.1">Triggers are now properties on the "data" field value, instead of separate field
types (#23)<a href="#appendix-B.11-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.11-1.3">
            <p id="appendix-B.11-1.3.1">group_ids in common_fields is now just also group_id<a href="#appendix-B.11-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Robin Marx (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Akamai</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rmarx@akamai.com" class="email">rmarx@akamai.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Luca Niccolini (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Meta</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lniccolini@meta.com" class="email">lniccolini@meta.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Marten Seemann (<span class="role">editor</span>)</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:martenseemann@gmail.com" class="email">martenseemann@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Lucas Pardue (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cloudflare</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lucas@lucaspardue.com" class="email">lucas@lucaspardue.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
